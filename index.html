<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career in Finance: Join Us as a Loan Advisor in Rajasthan | SKF Ajmer</title>
    <meta name="description" content="Start a rewarding career in finance! Shree Karni Kripa Associates is hiring Loan Advisors & Sales Executives across Rajasthan. Offering the best incentives, flexible timings, and growth. Apply now!">
    <meta name="keywords" content="finance jobs in rajasthan, sales executive jobs in ajmer, loan advisor career, dsa registration rajasthan, work with skf ajmer, high incentive jobs jaipur, flexible timing jobs, skf associates careers">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- jsPDF for PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <!-- SwiperJS for Carousel -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; }
        .page { display: none; animation: fadeIn 0.5s ease-in-out; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .header-shadow { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        
        .dropdown .dropdown-menu { display: none; }
        .dropdown:hover > .dropdown-menu { display: block; }
        .dropdown-submenu { position: relative; }
        .dropdown-submenu .dropdown-menu-level-2 { display: none; position: absolute; left: 100%; top: -7px; }
        .dropdown-submenu:hover .dropdown-menu-level-2 { display: block; }

        .nav-link.active { color: #ea580c; font-weight: 700; }
        
        .animate-on-scroll { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }
        
        .apply-modal { z-index: 1002; }

        .sidebar { transition: transform 0.3s ease-in-out; }
        @media (max-width: 1023px) {
            .sidebar { position: fixed; top: 0; left: -100%; width: 280px; height: 100%; z-index: 1000; }
            .sidebar.open { transform: translateX(0); }
            .sidebar-overlay { position: fixed; inset: 0; background-color: rgba(0,0,0,0.5); z-index: 999; display: none; }
            .sidebar-overlay.open { display: block; }
            .top-bar-info { display: none; }
            #main-nav-center { display: none; }
        }
        .sidebar-link.active { background-color: #f97316; color: white; }

        .faq-question { cursor: pointer; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }

        /* AI Maaru Chatbot Styles */
        #chat-container { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        #chat-window { display: none; width: 350px; height: 500px; background: white; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); flex-direction: column; overflow: hidden; }
        #chat-header { background: #f97316; color: white; padding: 1rem; display: flex; align-items: center; justify-content: space-between; }
        #chat-header-info { display: flex; align-items: center; }
        #chat-header-info img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid white; }
        #chat-header-info div { margin-left: 10px; }
        #chat-header-info h3 { font-weight: bold; font-size: 1rem; }
        #chat-header-info p { font-size: 0.75rem; opacity: 0.9; }
        #chat-close-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        #chat-messages { flex-grow: 1; padding: 1rem; overflow-y: auto; display: flex; flex-direction: column; gap: 0.75rem; background-color: #f1f5f9; scroll-behavior: smooth; }
        .chat-bubble { max-width: 85%; padding: 0.75rem 1rem; border-radius: 1rem; word-wrap: break-word; opacity: 0; transform: translateY(10px); animation: slide-in 0.4s forwards; }
        @keyframes slide-in { to { opacity: 1; transform: translateY(0); } }
        .user-bubble { background-color: #1e293b; color: white; align-self: flex-end; border-bottom-right-radius: 0.25rem; }
        .ai-bubble { background-color: #ffffff; color: #1e293b; align-self: flex-start; border-bottom-left-radius: 0.25rem; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        #chat-input-container { border-top: 1px solid #e2e8f0; padding: 0.75rem; display: flex; gap: 0.5rem; }
        #chat-input { flex-grow: 1; border: 1px solid #cbd5e1; padding: 0.75rem; border-radius: 8px; font-size: 0.9rem; }
        #chat-send-btn { background-color: #f97316; color: white; border: none; padding: 0 1.25rem; border-radius: 8px; cursor: pointer; font-weight: 600; }
        #chat-toggle-button { background-color: #f97316; color: white; width: 60px; height: 60px; border-radius: 50%; border: none; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.2); display: flex; justify-content: center; align-items: center; }
        #chat-toggle-button img { width: 52px; height: 52px; border-radius: 50%; }
        
        .proactive-bubble { position: absolute; bottom: 80px; right: 0; background-color: white; color: #1e293b; padding: 12px 16px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); width: max-content; max-width: 250px; opacity: 0; transform: translateY(10px); transition: opacity 0.3s ease-out, transform 0.3s ease-out; pointer-events: none; z-index: -1; }
        .proactive-bubble.show { opacity: 1; transform: translateY(0); pointer-events: auto; z-index: 1001; }
        .proactive-bubble::after { content: ''; position: absolute; bottom: -8px; right: 24px; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid white; }
        
        /* Confetti styles */
        .confetti-piece { position: absolute; width: 10px; height: 20px; background: #ffd300; top: 0; opacity: 0; }
        .confetti-piece.blue { background: #17d3ff; }
        .confetti-piece.green { background: #00e06d; }
        .confetti-piece.pink { background: #ff4daa; }
        .confetti-piece.purple { background: #9b59b6; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 1; } }

        /* Watermark */
        body::after {
            content: "";
            background-image: url('https://res.cloudinary.com/diqo7qmnw/image/upload/v1754217266/logo1_lt1w3w.png');
            background-repeat: no-repeat;
            background-position: center;
            background-size: 250px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            opacity: 0.03;
            z-index: -1;
            pointer-events: none;
        }
        
        .swiper-container {
            width: 100%;
            padding-top: 20px;
            padding-bottom: 50px;
        }

        .swiper-slide {
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease-in-out;
        }

        .swiper-slide:hover {
            transform: scale(1.1);
        }

        /* Thank you modal */
        #thank-you-modal { z-index: 1003; }
        #confetti-canvas { position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; }

        /* Loan Page Carousel */
        .loan-image-carousel {
            height: 400px;
            width: 100%;
        }
        .loan-image-carousel .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- HEADER with Multi-Level Dropdown -->
    <header id="header" class="sticky top-0 z-50">
        <!-- Top Bar -->
        <div class="bg-slate-800 text-white top-bar-info">
             <div class="container mx-auto px-6 py-2 flex justify-between items-center text-sm">
                <div class="flex items-center">
                    <svg class="w-4 h-4 mr-2 text-orange-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" /></svg>
                    <span>Ajmer, Rajasthan</span>
                </div>
                <div class="flex items-center space-x-4">
                     <svg class="w-4 h-4 mr-1 text-orange-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" /></svg>
                     <a href="tel:9214104963" class="hover:text-orange-400">9214104963</a> | 
                     <a href="tel:9352358494" class="hover:text-orange-400">9352358494</a> |
                     <a href="tel:8118838772" class="hover:text-orange-400">8118838772</a>
                     <a href="#eligibility-form" class="page-link bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold hover:bg-orange-600 transition-colors ml-4">Apply Now</a>
                </div>
            </div>
        </div>

        <!-- Main Navigation -->
        <nav class="bg-white header-shadow">
            <div class="container mx-auto px-6 py-3 flex justify-between items-center">
                <a href="#home" class="page-link flex items-center space-x-3">
                    <img src="https://res.cloudinary.com/diqo7qmnw/image/upload/v1754217266/logo1_lt1w3w.png" alt="Shree Karni Kripa Associates" class="h-14 w-auto flex-shrink-0">
                    <!-- Desktop Name -->
                    <div class="hidden md:block">
                        <span class="font-bold text-xl text-gray-800">Shree Karni Kripa Associates</span>
                        <p class="text-sm text-gray-500">Your Trusted Partner in Finance & Insurance</p>
                    </div>
                    <!-- Mobile Name -->
                    <div class="md:hidden">
                         <span class="font-bold text-xl text-gray-800">S<span class="text-red-600">K</span>F Associates</span>
                    </div>
                </a>
                <div class="flex items-center gap-4">
                    <ul class="hidden lg:flex items-center space-x-5 text-gray-700 font-medium">
                        <li><a href="#home" class="nav-link page-link hover:text-orange-600">Home</a></li>
                        <li class="dropdown">
                            <a href="#" class="nav-link hover:text-orange-600 flex items-center">Products <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7"></path></svg></a>
                            <ul class="dropdown-menu absolute bg-white shadow-lg rounded-md mt-2 py-2 w-56">
                                <li><a href="#home-loan" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Home Loan</a></li>
                                <li><a href="#personal-loan" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Personal Loan</a></li>
                                <li><a href="#business-loan" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Business Loan</a></li>
                                <li><a href="#car-loan" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Car / Vehicle Loan</a></li>
                                <li><a href="#lap-loan" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Loan Against Property</a></li>
                                 <li class="dropdown-submenu">
                                    <a href="#health-insurance" class="page-link flex justify-between items-center px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Insurance <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"></path></svg></a>
                                    <ul class="dropdown-menu-level-2 bg-white shadow-lg rounded-md py-2 w-56">
                                        <li><a href="#life-insurance" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Life</a></li>
                                        <li><a href="#health-insurance" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Health</a></li>
                                        <li><a href="#vehicle-insurance" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Vehicle</a></li>
                                        <li><a href="#general-insurance" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">General</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#about" class="page-link hover:text-orange-600">About Us</a></li>
                        <li><a href="https://karni-kripa.blogspot.com" target="_blank" rel="noopener noreferrer" class="hover:text-orange-600">Blog</a></li>
                        <li><a href="#emi-calculator" class="page-link hover:text-orange-600">EMI Calculator</a></li>
                         <li class="dropdown">
                            <a href="#join-us" class="page-link hover:text-orange-600 flex items-center">Join Us <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7"></path></svg></a>
                            <ul class="dropdown-menu absolute bg-white shadow-lg rounded-md mt-2 py-2 w-56">
                                 <li><a href="#join-dsa" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Join as DSA</a></li>
                                 <li><a href="#join-connector" class="page-link block px-4 py-2 text-sm text-gray-700 hover:bg-orange-50">Join as Connector</a></li>
                            </ul>
                        </li>
                        <li><a href="#contact" class="page-link hover:text-orange-600">Contact Us</a></li>
                    </ul>
                     <a href="#eligibility-form" class="page-link hidden lg:block bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                        Check Eligibility
                    </a>
                    <button id="mobile-menu-button" class="lg:hidden text-gray-600" aria-label="Open menu">
                         <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                    </button>
                </div>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden lg:hidden bg-white px-6 pb-4 border-t"></div>
    </header>

    <main>
        <!-- Home Page -->
        <div id="home-page" class="page">
            <section class="relative bg-cover bg-center text-white" style="background-image: url('https://res.cloudinary.com/dhme90fr1/image/upload/v1756626261/PHOTO-2025-08-31-13-08-02_2_szo0ga.jpg');">
                 <div class="absolute inset-0 bg-slate-800 opacity-60"></div>
                 <div class="container mx-auto px-6 py-24 md:py-36 text-center relative z-10">
                     <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-4 animate-on-scroll">Your Trusted Loan & Insurance Advisors</h1>
                     <p class="text-lg md:text-xl text-gray-200 max-w-3xl mx-auto mb-8 animate-on-scroll">"Sapne aap dekho, poore hum karenge." Get the Best Financial Solutions in Rajasthan.</p>
                     <div class="flex flex-col sm:flex-row justify-center items-center gap-4 animate-on-scroll">
                         <a href="#business-loan" class="page-link bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-lg transition-colors w-full sm:w-auto">Explore All Loans</a>
                          <a href="#health-insurance" class="page-link bg-white hover:bg-gray-200 text-orange-600 font-bold py-3 px-8 rounded-lg transition-colors w-full sm:w-auto">Explore Insurances</a>
                     </div>
                 </div>
            </section>

            <!-- All Loan & Insurance Page Section -->
            <section class="py-16 md:py-24 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-12 animate-on-scroll">Our Financial Services</h2>
                    <div class="grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8">
                        <a href="#home-loan" class="page-link group block rounded-lg overflow-hidden shadow-lg transform hover:-translate-y-2 transition-transform duration-300 animate-on-scroll">
                            <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1757241971/WhatsApp_Image_2025-09-07_at_3.20.38_PM_lqp1dy.jpg" alt="Home Loan" class="w-full h-48 object-cover">
                            <div class="p-4 md:p-6 bg-gray-50"><h3 class="text-lg md:text-xl font-bold text-gray-800">Home Loan</h3></div>
                        </a>
                        <a href="#business-loan" class="page-link group block rounded-lg overflow-hidden shadow-lg transform hover:-translate-y-2 transition-transform duration-300 animate-on-scroll" style="transition-delay: 100ms;">
                            <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1757239663/PHOTO-2025-09-07-15-20-36_b8guao.jpg" alt="Business Loan" class="w-full h-48 object-cover">
                            <div class="p-4 md:p-6 bg-gray-50"><h3 class="text-lg md:text-xl font-bold text-gray-800">Business Loan</h3></div>
                        </a>
                        <a href="#personal-loan" class="page-link group block rounded-lg overflow-hidden shadow-lg transform hover:-translate-y-2 transition-transform duration-300 animate-on-scroll" style="transition-delay: 200ms;">
                            <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1757239663/PHOTO-2025-09-07-15-20-34_q09kn6.jpg" alt="Personal Loan" class="w-full h-48 object-cover">
                            <div class="p-4 md:p-6 bg-gray-50"><h3 class="text-lg md:text-xl font-bold text-gray-800">Personal Loan</h3></div>
                        </a>
                         <a href="#car-loan" class="page-link group block rounded-lg overflow-hidden shadow-lg transform hover:-translate-y-2 transition-transform duration-300 animate-on-scroll" style="transition-delay: 300ms;">
                            <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1757237853/WhatsApp_Image_2025-09-07_at_3.06.10_PM_d8n3iz.jpg" alt="Car Loan" class="w-full h-48 object-cover">
                            <div class="p-4 md:p-6 bg-gray-50"><h3 class="text-lg md:text-xl font-bold text-gray-800">Car Loan</h3></div>
                        </a>
                        <a href="#lap-loan" class="page-link group block rounded-lg overflow-hidden shadow-lg transform hover:-translate-y-2 transition-transform duration-300 animate-on-scroll" style="transition-delay: 400ms;">
                             <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1757240471/WhatsApp_Image_2025-09-07_at_3.20.41_PM_yunya8.jpg" alt="Loan Against Property" class="w-full h-48 object-cover">
                            <div class="p-4 md:p-6 bg-gray-50"><h3 class="text-lg md:text-xl font-bold text-gray-800">Loan Against Property</h3></div>
                        </a>
                         <a href="#health-insurance" class="page-link group block rounded-lg overflow-hidden shadow-lg transform hover:-translate-y-2 transition-transform duration-300 animate-on-scroll" style="transition-delay: 500ms;">
                            <img src="https://placehold.co/600x400/ecfdf5/16a34a?text=Health+Insurance" alt="Health Insurance" class="w-full h-48 object-cover">
                            <div class="p-4 md:p-6 bg-gray-50"><h3 class="text-lg md:text-xl font-bold text-gray-800">Health Insurance</h3></div>
                        </a>
                    </div>
                </div>
            </section>

             <section class="py-16 md:py-24 bg-gray-50">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-12 animate-on-scroll">Why Trust SKF Associates?</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="p-6 animate-on-scroll"><div class="flex justify-center items-center mb-4"><svg class="h-12 w-12 text-orange-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z" /></svg></div><h3 class="text-xl font-semibold mb-2">Tied-up with All Major Banks</h3><p class="text-gray-600">We are associated with all major public and private banks like HDFC, ICICI, SBI to provide you the <span class="font-semibold">Best Loan Offers</span>.</p></div>
                        <div class="p-6 animate-on-scroll" style="transition-delay: 200ms;"><div class="flex justify-center items-center mb-4"><svg class="h-12 w-12 text-orange-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div><h3 class="text-xl font-semibold mb-2">Quick & Transparent Process</h3><p class="text-gray-600">Our process is transparent. We ensure quick loan approvals with minimum documentation.</p></div>
                        <div class="p-6 animate-on-scroll" style="transition-delay: 400ms;"><div class="flex justify-center items-center mb-4"><svg class="h-12 w-12 text-orange-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" /></svg></div><h3 class="text-xl font-semibold mb-2">Expert & Honest Advice</h3><p class="text-gray-600">We don't just provide loans; we understand your situation and give the right advice that is always in your best interest.</p></div>
                    </div>
                </div>
            </section>
            
            <section class="py-16 md:py-24 bg-white overflow-hidden">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-12 animate-on-scroll">Brands We Trust</h2>
                    <div class="swiper-container brands-carousel">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621450/imgi_85_hdfc-2_dzzdra.png" alt="HDFC Bank" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621416/imgi_76_YES-BANK_zgemo9.png" alt="YES Bank" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621188/imgi_41_SBI_psonew.png" alt="SBI Bank" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621186/imgi_28_IDFC-FIRST_wljvii.png" alt="IDFC First Bank" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621186/imgi_44_BHFL_Logo-min3723_m9hprx.png" alt="Bajaj Housing Finance" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756622692/imgi_118_AU-Logo-unit-2_prhzvg.png" alt="AU Small Finance Bank" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/ICICI_Bank_Logo.svg/2560px-ICICI_Bank_Logo.svg.png" alt="ICICI Bank" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621451/imgi_30_tata-capital-housing-updated_t0xydb.png" alt="Tata Capital" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621451/imgi_88_aditya-upodated_ihx4kj.png" alt="Aditya Birla Capital" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621369/imgi_63_punawala3739_tljctp.png" alt="Poonawalla Fincorp" class="mx-auto h-16 object-contain"></div>
                            <div class="swiper-slide"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756621450/imgi_82_file_sua6c1.png" alt="Lendingkart" class="mx-auto h-16 object-contain"></div>
                        </div>
                         <div class="swiper-pagination"></div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Generic Landing Page -->
        <div id="loan-page-template" class="page">
            <div class="bg-white py-4 border-b">
                <div class="container mx-auto px-6 flex items-center justify-between">
                    <nav id="breadcrumbs" class="text-sm text-gray-600"></nav>
                    <button id="sidebar-toggle" class="lg:hidden bg-gray-200 p-2 rounded-md">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    </button>
                </div>
            </div>
            <div class="container mx-auto px-6 py-12">
                <div class="flex flex-col lg:flex-row gap-8">
                    <aside id="loan-sidebar" class="sidebar bg-white p-6 rounded-lg shadow-md lg:w-1/4 h-fit sticky top-36"></aside>
                    <main id="loan-main-content" class="w-full lg:w-3/4"></main>
                </div>
            </div>
        </div>

        <!-- EMI Calculator Page -->
        <div id="emi-calculator-page" class="page">
            <!-- Content for EMI Calculator will be inserted by JS -->
        </div>
        
        <!-- ABOUT US PAGE -->
        <div id="about-page" class="page">
            <div class="bg-orange-50/50">
                <div class="container mx-auto px-6 py-16 text-center">
                    <h1 class="text-4xl font-extrabold text-slate-800">About Shree Karni Kripa Associates</h1>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Your trusted partner in finance and insurance, dedicated to turning your dreams into reality.</p>
                </div>
            </div>
            <div class="container mx-auto px-6 py-16">
                <div class="grid lg:grid-cols-5 gap-12 items-start">
                    <div class="lg:col-span-2 space-y-6 text-gray-700 leading-relaxed">
                        <h2 class="text-3xl font-bold text-gray-800">Our Story, Your Future</h2>
                        <p>Founded with a vision to simplify finance for everyone in Rajasthan, Shree Karni Kripa Associates (SKF Ajmer) has grown from a humble beginning in Ajmer to a trusted name across the state. We saw a need for a financial partner who not only provides loans and insurance but also builds lasting relationships based on trust and transparency.</p>
                        <h3 class="text-2xl font-bold text-gray-800 pt-4">Our Mission & Values</h3>
                        <p>Our mission is to empower individuals and businesses by providing honest, transparent, and expert financial guidance. We are committed to helping our clients achieve their dreams—whether it's buying a home, starting a business, or securing their family's future. Our core values are:</p>
                        <ul class="list-disc list-inside space-y-2 pl-4">
                            <li><span class="font-semibold">Integrity:</span> Honest and ethical advice, always.</li>
                            <li><span class="font-semibold">Customer-Centricity:</span> You are at the heart of everything we do.</li>
                            <li><span class="font-semibold">Excellence:</span> Striving to find the best possible financial solutions for you.</li>
                        </ul>
                    </div>
                    <div class="lg:col-span-3 p-8 bg-white rounded-lg shadow-lg">
                        <h3 class="text-3xl font-bold text-center text-gray-800 mb-8">Meet Our Team</h3>
                        
                        <!-- Founder Section -->
                        <div class="text-center p-6 bg-orange-50 rounded-lg border border-orange-200 mb-10">
                             <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756626261/PHOTO-2025-08-31-13-08-02_hejop2.jpg" alt="Rajendra Singh" class="w-32 h-32 rounded-full mx-auto ring-4 ring-white object-cover shadow-md">
                             <h4 class="mt-4 text-2xl font-bold text-slate-800">Rajendra Singh</h4>
                             <p class="text-orange-600 font-semibold">Founder & CEO</p>
                             <p class="text-sm text-gray-600 mt-2 max-w-md mx-auto">As the visionary founder of SKF Ajmer, Rajendra Singh established the company with a singular mission: to make financial services simple, transparent, and accessible for every person in Rajasthan. His years of experience and deep understanding of the local community's needs are the driving force behind our team's commitment. He inspires us to uphold the highest standards of customer satisfaction and integrity in every interaction.</p>
                        </div>
                        
                        <div class="space-y-8">
                            <!-- Management -->
                            <div>
                                <h4 class="text-xl font-bold text-orange-600 border-b pb-2 mb-6">Management</h4>
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-center">
                                    <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756629459/PHOTO-2025-08-28-13-18-32_h8oozl.jpg" alt="Krishna Singh" class="w-24 h-24 rounded-full mx-auto ring-4 ring-orange-100 object-cover">
                                        <h5 class="mt-4 font-bold">Krishna Singh</h5>
                                        <p class="text-gray-500 text-sm">Marketing Head</p>
                                    </div>
                                     <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756628063/PHOTO-2025-08-28-13-05-09_oqhbv6.jpg" alt="Sona Mulani" class="w-24 h-24 rounded-full mx-auto ring-4 ring-orange-100 object-cover">
                                        <h5 class="mt-4 font-bold">Sona Mulani</h5>
                                        <p class="text-gray-500 text-sm">Branch Manager</p>
                                    </div>
                                    <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756628069/PHOTO-2025-08-28-13-00-15_gb2ei3.jpg" alt="Mohammad Sharif" class="w-24 h-24 rounded-full mx-auto ring-4 ring-orange-100 object-cover">
                                        <h5 class="mt-4 font-bold">Mohammad Sharif</h5>
                                        <p class="text-gray-500 text-sm">Operations Head</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Team Leaders -->
                             <div>
                                <h4 class="text-xl font-bold text-orange-600 border-b pb-2 mb-6">Team Leaders</h4>
                                <div class="flex justify-center flex-wrap gap-8 text-center">
                                     <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756991306/WhatsApp_Image_2025-08-28_at_11.52.11_AM_mffbbw.jpg" alt="Saroj Choudhary" class="w-24 h-24 rounded-full mx-auto ring-4 ring-blue-100 object-cover">
                                        <h5 class="mt-3 font-bold">Saroj Choudhary</h5>
                                        <p class="text-gray-500 text-sm">Team Leader</p>
                                    </div>
                                    <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756628064/PHOTO-2025-08-28-13-18-11_b5qpie.jpg" alt="Mannu Choudhary" class="w-24 h-24 rounded-full mx-auto ring-4 ring-blue-100 object-cover">
                                        <h5 class="mt-3 font-bold">Mannu Choudhary</h5>
                                        <p class="text-gray-500 text-sm">Team Leader</p>
                                    </div>
                                </div>
                            </div>

                             <!-- Relationship Managers & Executives -->
                            <div>
                                <h4 class="text-xl font-bold text-orange-600 border-b pb-2 mb-6">Core Team</h4>
                                <div class="grid grid-cols-2 sm:grid-cols-4 gap-6 text-center">
                                    <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756628065/PHOTO-2025-08-28-13-04-18_ihap7m.jpg" alt="Sunil Kumar Meena" class="w-20 h-20 rounded-full mx-auto object-cover">
                                        <h5 class="mt-2 font-semibold text-sm">Sunil K. Meena</h5>
                                        <p class="text-xs text-gray-500">Relationship Manager</p>
                                    </div>
                                    <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756628064/PHOTO-2025-08-28-13-15-13_d8qxkd.jpg" alt="Pratap Singh" class="w-20 h-20 rounded-full mx-auto object-cover">
                                        <h5 class="mt-2 font-semibold text-sm">Pratap Singh</h5>
                                        <p class="text-xs text-gray-500">Relationship Manager</p>
                                    </div>
                                    <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/c_thumb,g_face,h_200,w_200/v1756628071/PHOTO-2025-08-28-13-10-27_wbfxlj.jpg" alt="Sunny" class="w-20 h-20 rounded-full mx-auto object-cover">
                                        <h5 class="mt-2 font-semibold text-sm">Sunny</h5>
                                        <p class="text-xs text-gray-500">Relationship Manager</p>
                                    </div>
                                    <div>
                                        <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756628074/PHOTO-2025-08-28-13-06-17_srew5k.jpg" alt="Nandni Rajput" class="w-20 h-20 rounded-full mx-auto object-cover">
                                        <h5 class="mt-2 font-semibold text-sm">Nandni Rajput</h5>
                                        <p class="text-xs text-gray-500">Process Executive</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                         <div class="text-center mt-12">
                            <a href="#join-us" class="page-link bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors">Join Our Team</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="contact-page" class="page"><div class="container mx-auto p-8 text-center"><h1>Contact Us Page</h1><p>Content coming soon.</p></div></div>
        
        <div id="join-us-page" class="page">
             <div class="bg-gray-100">
                <div class="container mx-auto px-6 py-16 text-center">
                    <h1 class="text-4xl font-extrabold text-slate-800">Career in Finance: Join Us as a Loan Advisor in Rajasthan | SKF Ajmer</h1>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Grow with Rajasthan’s leading finance company. Be a part of SKF Ajmer and start your journey today!</p>
                </div>
            </div>

            <div class="py-16 bg-white">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">Why Join SKF Ajmer?</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-5xl mx-auto">
                        <div class="p-6 bg-gray-50 rounded-lg text-center"><h3 class="font-semibold text-lg">Trusted Finance Partner</h3><p class="text-gray-600 mt-2">Work with a trusted name across Rajasthan.</p></div>
                        <div class="p-6 bg-gray-50 rounded-lg text-center"><h3 class="font-semibold text-lg">Work with 90+ Banks & NBFCs</h3><p class="text-gray-600 mt-2">Gain experience with a vast network of financial institutions.</p></div>
                        <div class="p-6 bg-gray-50 rounded-lg text-center"><h3 class="font-semibold text-lg">High Incentives & Flexible Timing</h3><p class="text-gray-600 mt-2">Earn great incentives with the freedom of flexible hours.</p></div>
                        <div class="p-6 bg-gray-50 rounded-lg text-center"><h3 class="font-semibold text-lg">Growth Oriented Team Culture</h3><p class="text-gray-600 mt-2">We believe in growing together as a team.</p></div>
                        <div class="p-6 bg-gray-50 rounded-lg text-center"><h3 class="font-semibold text-lg">Recognition & Rewards</h3><p class="text-gray-600 mt-2">Your hard work is always recognized and rewarded.</p></div>
                    </div>
                </div>
            </div>

            <div id="join-dsa" class="py-16 bg-orange-50/50">
                <div class="container mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-4">
                        <h2 class="text-3xl font-bold text-gray-800">Become a DSA Partner</h2>
                        <p class="text-gray-600">Work as a DSA in Rajasthan and grow your finance career with SKF Ajmer. If you are looking for finance jobs in Rajasthan, DSA registration Ajmer, or high incentive jobs Jaipur, this is the right opportunity for you.</p>
                        <h4 class="font-semibold pt-2">Responsibilities:</h4>
                        <ul class="list-disc list-inside text-gray-600">
                            <li>Refer customers for loans (Home Loan, Business Loan, Personal Loan, Car Loan, etc.)</li>
                            <li>Coordinate with banks & SKF team</li>
                            <li>Earn attractive commission on every deal</li>
                        </ul>
                        <h4 class="font-semibold pt-2">Eligibility:</h4>
                         <ul class="list-disc list-inside text-gray-600">
                            <li>18+ years, any graduate/diploma preferred</li>
                            <li>Basic communication skills</li>
                            <li>Finance background will be an added advantage</li>
                        </ul>
                    </div>
                     <div class="bg-white p-8 rounded-lg shadow-lg">
                        <h3 class="text-2xl font-bold mb-6 text-center">Apply as DSA</h3>
                        <form id="dsa-form" class="space-y-4" data-role="DSA">
                            <input name="fullName" type="text" placeholder="Full Name" class="w-full p-3 border rounded-lg" required>
                            <input name="mobile" type="tel" placeholder="Mobile Number" class="w-full p-3 border rounded-lg" required>
                            <input name="email" type="email" placeholder="Email Address" class="w-full p-3 border rounded-lg" required>
                            <input name="city" type="text" placeholder="City / Pincode" class="w-full p-3 border rounded-lg" required>
                            <input name="experience" type="text" placeholder="Experience (if any)" class="w-full p-3 border rounded-lg">
                            <button type="submit" class="w-full bg-orange-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors">Apply Now</button>
                        </form>
                    </div>
                </div>
            </div>

            <div id="join-connector" class="py-16 bg-white">
                 <div class="container mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center">
                     <div class="bg-white p-8 rounded-lg shadow-lg lg:order-last">
                        <h3 class="text-2xl font-bold mb-6 text-center">Apply as Connector</h3>
                        <form id="connector-form" class="space-y-4" data-role="Connector">
                            <input name="fullName" type="text" placeholder="Full Name" class="w-full p-3 border rounded-lg" required>
                            <input name="mobile" type="tel" placeholder="Mobile Number" class="w-full p-3 border rounded-lg" required>
                            <input name="email" type="email" placeholder="Email Address" class="w-full p-3 border rounded-lg" required>
                            <input name="city" type="text" placeholder="City / Pincode" class="w-full p-3 border rounded-lg" required>
                            <textarea name="notes" placeholder="Notes (Optional)" rows="3" class="w-full p-3 border rounded-lg"></textarea>
                            <button type="submit" class="w-full bg-orange-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors">Apply Now</button>
                        </form>
                    </div>
                    <div class="space-y-4">
                        <h2 class="text-3xl font-bold text-gray-800">Join as a Loan Connector</h2>
                        <p class="text-gray-600">Start your journey as a Loan Connector in Rajasthan with SKF Associates Ajmer. Perfect for students, housewives, and working professionals who want to earn with flexible timing jobs.</p>
                        <h4 class="font-semibold pt-2">Responsibilities:</h4>
                        <ul class="list-disc list-inside text-gray-600">
                           <li>Share loan leads with SKF Ajmer team</li>
                           <li>No documentation or bank dealing required</li>
                           <li>Earn quick incentives on successful loan closures</li>
                        </ul>
                        <h4 class="font-semibold pt-2">Eligibility:</h4>
                         <ul class="list-disc list-inside text-gray-600">
                            <li>Anyone with basic contacts</li>
                            <li>No age or education restriction</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="py-16 bg-slate-800 text-white text-center">
                <div class="container mx-auto px-6">
                    <h3 class="text-2xl font-bold">Work with SKF Ajmer – Rajasthan’s Trusted Loan Partner.</h3>
                    <p class="mt-2">Start your finance career today!</p>
                    <a href="#join-dsa" class="page-link inline-block mt-6 bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors">Apply Now</a>
                </div>
            </div>
        </div>

        <!-- ELIGIBILITY FORM PAGE -->
        <div id="eligibility-form-page" class="page">
            <div class="bg-gray-100">
                <div class="container mx-auto px-6 py-16 text-center">
                    <h1 class="text-4xl font-extrabold text-slate-800">Check Your Loan Eligibility</h1>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Get a quick eligibility check with our smart form and connect with the right expert instantly.</p>
                </div>
            </div>
            <div class="container mx-auto px-6 py-16">
                <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg">
                    <form id="smart-eligibility-form" class="space-y-6">
                        <div>
                            <label for="fullName" class="block font-medium text-gray-700">Full Name</label>
                            <input type="text" id="fullName" name="fullName" class="w-full mt-1 p-3 border rounded-lg" required>
                        </div>
                        <div>
                            <label for="mobileNumber" class="block font-medium text-gray-700">Mobile Number</label>
                            <input type="tel" id="mobileNumber" name="mobileNumber" class="w-full mt-1 p-3 border rounded-lg" required>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="city" class="block font-medium text-gray-700">City</label>
                                <input type="text" id="city" name="city" class="w-full mt-1 p-3 border rounded-lg" required>
                            </div>
                            <div>
                                <label for="pincode" class="block font-medium text-gray-700">Pincode</label>
                                <input type="text" id="pincode" name="pincode" class="w-full mt-1 p-3 border rounded-lg" required>
                            </div>
                        </div>

                        <div>
                            <label class="block font-medium text-gray-700">Employment Type</label>
                            <div class="flex gap-4 mt-2">
                                <label class="flex items-center"><input type="radio" name="employmentType" value="Job" class="mr-2" checked> Job</label>
                                <label class="flex items-center"><input type="radio" name="employmentType" value="Business" class="mr-2"> Business</label>
                            </div>
                        </div>

                        <div id="salary-field">
                            <label for="monthlySalary" class="block font-medium text-gray-700">Monthly Salary (₹)</label>
                            <input type="number" id="monthlySalary" name="monthlySalary" class="w-full mt-1 p-3 border rounded-lg">
                        </div>
                        <div id="income-field" class="hidden">
                            <label for="monthlyIncome" class="block font-medium text-gray-700">Monthly Income (₹)</label>
                            <input type="number" id="monthlyIncome" name="monthlyIncome" class="w-full mt-1 p-3 border rounded-lg">
                        </div>

                        <div>
                            <label class="block font-medium text-gray-700">Do you have any running loan?</label>
                            <div class="flex gap-4 mt-2">
                                <label class="flex items-center"><input type="radio" name="runningLoan" value="Yes" class="mr-2"> Yes</label>
                                <label class="flex items-center"><input type="radio" name="runningLoan" value="No" class="mr-2" checked> No</label>
                            </div>
                        </div>

                        <div id="running-loan-details" class="hidden space-y-4 p-4 bg-gray-50 rounded-lg border">
                            <div>
                                <label for="emiAmount" class="block font-medium text-gray-700">Total Monthly EMI Amount (₹)</label>
                                <input type="number" id="emiAmount" name="emiAmount" class="w-full mt-1 p-3 border rounded-lg">
                            </div>
                            <div>
                                <label for="outstandingLoan" class="block font-medium text-gray-700">Total Outstanding Loan Amount (₹)</label>
                                <input type="number" id="outstandingLoan" name="outstandingLoan" class="w-full mt-1 p-3 border rounded-lg">
                            </div>
                             <div>
                                <label for="overdueStatus" class="block font-medium text-gray-700">Overdue / Settlement Status</label>
                                <select id="overdueStatus" name="overdueStatus" class="w-full mt-1 p-3 border rounded-lg bg-white">
                                    <option>No Overdue</option>
                                    <option>Overdue</option>
                                    <option>Settled</option>
                                </select>
                            </div>
                        </div>
                        
                         <div>
                            <label for="eligibility-loan-type" class="block font-medium text-gray-700">Loan Type</label>
                            <select id="eligibility-loan-type" name="loanType" class="w-full mt-1 p-3 border rounded-lg bg-white">
                                <option value="Home Loan">Home Loan</option>
                                <option value="Personal Loan">Personal Loan</option>
                                <option value="Business Loan">Business Loan</option>
                                <option value="Car Loan">Car/Vehicle Loan</option>
                                <option value="LAP">Loan Against Property</option>
                            </select>
                        </div>
                        <div>
                            <label for="requiredLoanAmount" class="block font-medium text-gray-700">Required Loan Amount (₹)</label>
                            <input type="number" id="requiredLoanAmount" name="requiredLoanAmount" class="w-full mt-1 p-3 border rounded-lg" required>
                        </div>
                        <button type="submit" class="w-full bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 transition-colors text-lg">Check Eligibility</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- AI Maaru Chatbot -->
    <div id="chat-container">
        <!-- Chatbot will be injected here by JS -->
    </div>

    <!-- Thank You Modal -->
    <div id="thank-you-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center">
        <div class="bg-white p-8 rounded-lg shadow-2xl text-center relative max-w-sm w-full">
            <canvas id="confetti-canvas"></canvas>
            <h2 class="text-3xl font-bold text-green-600 mb-4">Thank You!</h2>
            <p class="text-gray-700 mb-6">Your details have been submitted. Our team will connect with you shortly.</p>
            <button id="continue-whatsapp-btn" class="w-full bg-green-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition-colors">Continue with WhatsApp</button>
        </div>
    </div>
    
    <div id="confetti-container" class="absolute inset-0 pointer-events-none overflow-hidden"></div>

    <footer class="bg-slate-800 text-gray-300">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-sm">
                <!-- Company Info -->
                <div class="space-y-4">
                    <h3 class="text-white font-bold text-lg">Shree Karni Kripa Associates (SKF Ajmer)</h3>
                    <p class="flex items-start">
                        <svg class="w-5 h-5 mr-2 mt-1 text-orange-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        <span>2nd Floor, Bhansali Complex, Kayad Road, Ajmer – 305001</span>
                    </p>
                     <p class="flex items-center">
                        <svg class="w-4 h-4 mr-2 text-orange-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                        <span><a href="tel:9214104963" class="hover:text-orange-400">9214104963</a> | <a href="tel:9352358494" class="hover:text-orange-400">9352358494</a> | <a href="tel:8118838772" class="hover:text-orange-400">8118838772</a></span>
                    </p>
                    <p class="flex items-center">
                        <svg class="w-4 h-4 mr-2 text-orange-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                        <a href="mailto:insurancesolution2018@gmail.com" class="hover:text-orange-400">insurancesolution2018@gmail.com</a>
                    </p>
                    <a href="https://www.google.com/maps?ll=26.514595,74.683603&z=15&t=m&hl=en&gl=IN&mapclient=embed&cid=16570102492616105663" target="_blank" rel="noopener noreferrer" class="text-orange-400 hover:text-white font-semibold inline-flex items-center">
                        View on Google Maps <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                    </a>
                </div>
                
                <!-- Quick Links -->
                <div class="space-y-4">
                    <h3 class="text-white font-bold text-lg">Quick Links</h3>
                    <ul class="grid grid-cols-2 gap-2 text-gray-400">
                        <li><a href="#home" class="page-link hover:text-orange-400">Home</a></li>
                        <li><a href="#about" class="page-link hover:text-orange-400">About Us</a></li>
                        <li><a href="https://karni-kripa.blogspot.com" target="_blank" rel="noopener noreferrer" class="hover:text-orange-400">Blog</a></li>
                        <li><a href="#emi-calculator" class="page-link hover:text-orange-400">EMI Calculator</a></li>
                        <li><a href="#join-us" class="page-link hover:text-orange-400">Join Us</a></li>
                        <li><a href="#contact" class="page-link hover:text-orange-400">Contact Us</a></li>
                        <li><a href="#home-loan" class="page-link hover:text-orange-400">Products</a></li>
                    </ul>
                </div>

                <!-- Social Media -->
                <div class="space-y-4">
                     <h3 class="text-white font-bold text-lg">Follow Us</h3>
                     <div class="flex space-x-4">
                        <a href="https://www.facebook.com/share/19hmuoJW8a/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors" aria-label="Facebook"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg></a>
                        <a href="https://www.instagram.com/skf_associate" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors" aria-label="Instagram"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.416 2.427-.465C9.793 2.013 10.147 2 12.315 2zm-1.161 1.043c-1.06.048-1.696.21-2.26.433a2.868 2.868 0 00-1.04 1.04c-.224.564-.385 1.2-.433 2.26-.049 1.024-.06 1.344-.06 3.723s.011 2.699.06 3.723c.048 1.06.209 1.696.433 2.26a2.868 2.868 0 001.04 1.04c.564.224 1.2.385 2.26.433 1.024.049 1.344.06 3.723.06s2.699-.011 3.723-.06c1.06-.048 1.696-.209 2.26-.433a2.868 2.868 0 001.04-1.04c.224-.564.385-1.2.433-2.26.049-1.024.06-1.344.06-3.723s-.011-2.699-.06-3.723c-.048-1.06-.209-1.696-.433-2.26a2.868 2.868 0 00-1.04-1.04c-.564-.224-1.2-.385-2.26-.433-1.024-.049-1.344-.06-3.723-.06s-2.7.011-3.723.06zM12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.338-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z" clip-rule="evenodd" /></svg></a>
                        <a href="https://x.com/skf_ajmer?s=21" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors" aria-label="X/Twitter"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" /></svg></a>
                        <a href="https://chat.whatsapp.com/JPUFjLhZAzb5wFNcNvRCy1?mode=ems_copy_t" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors" aria-label="WhatsApp"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2 22l5.25-1.38c1.45.79 3.08 1.21 4.79 1.21 5.46 0 9.91-4.45 9.91-9.91S17.5 2 12.04 2m.01 1.66c4.56 0 8.26 3.7 8.26 8.26 0 4.56-3.7 8.26-8.26 8.26-1.55 0-3.04-.43-4.34-1.21l-.3-.18-3.22.84.86-3.14-.2-.32a8.18 8.18 0 0 1-1.26-4.49c0-4.56 3.7-8.26 8.26-8.26m4.52 6.13c-.24-.12-1.42-.7-1.64-.78-.22-.08-.38-.12-.54.12-.16.24-.62.78-.76.94-.14.16-.28.18-.52.06-.24-.12-.99-.36-1.89-1.16-.7-.62-1.17-1.38-1.31-1.62-.14-.24-.02-.37.1-.49.11-.11.24-.28.36-.42.12-.14.16-.24.24-.4.08-.16.04-.3-.02-.42s-.54-1.3-.74-1.78c-.2-.48-.4-.42-.55-.42-.14 0-.3 0-.46 0s-.42.06-.64.3c-.22.24-.86.84-1.06 2.04-.2 1.2.1 2.38.22 2.54.12.16 1.41 2.18 3.42 3.02.47.2 1.03.31 1.39.4.52.12.99.1.14-.06.2-.06.62-.26.84-.5.22-.24.22-.44.16-.5Z" /></svg></a>
                     </div>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-700 pt-6 text-center text-gray-400 text-xs">
                 © 2025 Shree Karni Kripa Associates, Ajmer | All Rights Reserved.
            </div>
        </div>
    </footer>


<script>
document.addEventListener('DOMContentLoaded', function () {
    const pages = document.querySelectorAll('.page');
    const pageLinks = document.querySelectorAll('.page-link');
    const loanTemplatePage = document.getElementById('loan-page-template');
    const breadcrumbsContainer = document.getElementById('breadcrumbs');
    const sidebarContainer = document.getElementById('loan-sidebar');
    const mainContentContainer = document.getElementById('loan-main-content');
    const mobileMenuContainer = document.getElementById('mobile-menu');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const sidebarToggleButton = document.getElementById('sidebar-toggle');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const emiCalculatorPage = document.getElementById('emi-calculator-page');

    const productData = {
        'home-loan': {
            name: 'Home Loan',
            overview: 'Apne ghar ka sapna saakar karein. We offer a wide range of home loan products designed to meet your unique needs, whether you are buying, constructing, or renovating your home. With competitive interest rates and long tenure, we make home ownership affordable and easy.',
            images: [
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757241971/WhatsApp_Image_2025-09-07_at_3.20.38_PM_lqp1dy.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757240471/WhatsApp_Image_2025-09-07_at_3.20.41_PM_yunya8.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239691/PHOTO-2025-09-07-15-20-33_aaexip.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239662/PHOTO-2025-09-07-15-20-40_udm8ze.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239662/PHOTO-2025-09-07-15-20-39_udei1z.jpg',
            ],
            subtypes: {
                'purchase': { name: 'New Home Purchase', roi: '8.50%', tenure: '30 Years', eligibility: 'Applicant must be an Indian resident, aged between 21 to 65 years. Salaried individuals or self-employed professionals with a stable income source and a good credit score (700+) are eligible.', features: ['Attractive interest rates', 'Flexible repayment tenure up to 30 years', 'Loan amounts up to 90% of property value', 'Quick and transparent processing'], documents: ['PAN Card & Aadhaar Card', 'Latest 3 months salary slips', 'Form 16 or ITR for last 2 years', 'Last 6 months bank statements', 'Allotment letter or Sale agreement of the property'], faq: [ { q: 'Can I get 100% financing for my home?', a: 'Most banks finance up to 80-90% of the property value. The rest needs to be contributed by the buyer as a down payment.' }, { q: 'Can a co-applicant be added to the home loan?', a: 'Yes, you can add a co-applicant, like your spouse or immediate family member, which can also help in increasing your loan eligibility.' } ] },
                'construction': { name: 'Home Construction', roi: '8.75%', tenure: '30 Years', eligibility: 'You must own a plot of land with clear titles. A detailed construction estimate, approved by a certified architect, and necessary permissions from local authorities are required.', features: ['Finance for construction on a freehold or leasehold plot', 'Loan disbursed in tranches based on construction stage', 'Flexible tenure and repayment options', 'Expert legal and technical counselling'], documents: ['Proof of land ownership (Title Deed)', 'Approved building plans from local authorities', 'Construction cost estimate from an architect', 'Standard KYC and income documents'], faq: [ { q: 'How is the loan disbursed for construction?', a: 'The loan is typically disbursed in 4-5 installments based on the progress of construction, which is verified by the bank.' } ] },
                'renovation': { name: 'Home Renovation', roi: '9.00%', tenure: '15 Years', eligibility: 'Must be the owner of the property being renovated. A detailed estimate of the renovation work from a contractor or architect is needed.', features: ['Covers costs of tiling, flooring, painting, plumbing, etc.', 'Quick approval process', 'No collateral required for smaller amounts', 'Improves your property value'], documents: ['Proof of property ownership', 'Detailed renovation estimate', 'KYC and income proofs'], faq: [ { q: 'Is there a limit on the renovation loan amount?', a: 'Yes, the loan amount depends on your income eligibility and the renovation estimate, subject to the bank\'s policy.' } ] },
            }
        },
        'business-loan': {
            name: 'Business Loan',
            overview: 'Apne business ko nayi unchaiyon tak pahunchayein. Our business loans are designed to provide the financial support you need for expansion, purchasing machinery, or managing working capital. We offer both secured and unsecured options to fit your business needs.',
            images: [
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239663/PHOTO-2025-09-07-15-20-36_b8guao.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239662/PHOTO-2025-09-07-15-20-36_1_kwtbrl.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239662/PHOTO-2025-09-07-15-20-40_1_khdviy.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239662/PHOTO-2025-09-07-15-20-37_yylckg.jpg'
            ],
            subtypes: {
                'working-capital': { name: 'Working Capital Loan', roi: '12.50%', tenure: '5 Years', eligibility: 'For businesses operational for at least 3 years with stable sales and profit. Required documents include GST returns and audited financials.', features: ['Maintains liquidity for daily operations', 'Flexible usage of funds', 'Overdraft facility available', 'Quick processing and disbursal'], documents: ['Business registration documents', 'GST returns for the last year', 'Audited financials for last 3 years', 'Bank statements for the last 12 months'], faq: [ { q: 'What is the difference between a cash credit and an overdraft facility?', a: 'Both are working capital loans. A cash credit is a short-term loan against inventory and receivables, while an overdraft allows you to withdraw more than your account balance up to a sanctioned limit.' } ] },
                'term': { name: 'Term Loan', roi: '11.75%', tenure: '7 Years', eligibility: 'For established businesses looking for funds for capital expenditure like machinery purchase or expansion. A strong business plan and profitability track record are essential.', features: ['Ideal for long-term capital needs', 'Fixed repayment schedule (EMI)', 'Attractive interest rates', 'Can be secured against assets'], documents: ['Detailed project report for the proposed expenditure', 'Quotations for machinery or equipment', 'Company KYC and financials', 'Promoter\'s KYC and financials'], faq: [ { q: 'Can a term loan be prepaid?', a: 'Yes, most banks allow prepayment of term loans, though some may charge a prepayment penalty. It is advisable to check the terms before applying.' } ] },
                'msme': { name: 'MSME Loan', roi: '10.50%', tenure: '10 Years', eligibility: 'The business must be registered as a Micro, Small, or Medium Enterprise (MSME) under the Udyam portal. Eligibility often aligns with various government schemes.', features: ['Lower interest rates under government schemes', 'Collateral-free loans available (e.g., CGTMSE)', 'Support for small businesses', 'Simplified application process'], documents: ['Udyam Registration Certificate', 'Business KYC documents', 'Personal KYC of promoters', 'Bank statements and ITR'], faq: [ { q: 'Is collateral always required for an MSME loan?', a: 'Not necessarily. Under the CGTMSE scheme, you can get collateral-free loans up to ₹5 crore from eligible banks.' } ] },
            }
        },
        'personal-loan': {
             name: 'Personal Loan',
             overview: 'Har zaroorat ke liye, turant financial solution. Personal loans are the perfect solution for your immediate financial needs, be it a wedding, vacation, or medical emergency. With minimal documentation and quick disbursal, get the funds you need without any hassle.',
             images: [
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239663/PHOTO-2025-09-07-15-20-34_q09kn6.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757239663/PHOTO-2025-09-07-15-20-35_kxclyr.jpg'
             ],
            subtypes: {
                'wedding': { name: 'Wedding Loan', roi: '10.99%', tenure: '5 Years', eligibility: 'Available for both salaried and self-employed individuals with a strong credit history and a minimum monthly income of ₹25,000.', features: ['Covers all wedding-related expenses', 'Quick approval and disbursal', 'No collateral required', 'Flexible repayment tenure'], documents: ['PAN & Aadhaar Card', 'Last 3 months salary slips', 'Last 6 months bank statement', 'Employment ID card'], faq: [ { q: 'How much loan can I get for a wedding?', a: 'The loan amount depends on your income, credit score, and repayment capacity. It can range from ₹50,000 to ₹40 Lakhs.' } ] },
                'travel': { name: 'Travel Loan', roi: '11.49%', tenure: '3 Years', eligibility: 'Indian residents with a stable job and a good credit score can apply. Some lenders might ask for travel bookings.', features: ['Fund your dream vacation', 'Easy EMIs make travel affordable', 'No need to dip into your savings', 'Instant online approval'], documents: ['KYC Documents', 'Income proof', 'Bank statements', 'Optionally, travel tickets or hotel bookings'], faq: [ { q: 'Is a travel loan better than using a credit card?', a: 'Travel loans often come with lower interest rates than credit cards, making them a more cost-effective option for planned vacations.' } ] },
                'medical': { name: 'Medical Emergency Loan', roi: '10.25%', tenure: '5 Years', eligibility: 'Available to salaried and self-employed individuals. The process is expedited for emergencies, requiring basic KYC and income documents.', features: ['Immediate funds for medical emergencies', 'Hassle-free and minimal documentation', 'Covers hospitalization, surgery, and other medical bills', 'Disbursal within a few hours'], documents: ['Identity and address proof', 'Income proof', 'Hospital admission papers or estimate (if available)'], faq: [ { q: 'Can I get a loan if I don\'t have health insurance?', a: 'Absolutely. A medical loan is designed to help you cover expenses irrespective of whether you have health insurance or not.' } ] },
            }
        },
        'car-loan': {
            name: 'Car Loan',
            overview: 'Apni pasand ki car ghar laayein. Our car loans make it easy to buy your dream car with attractive interest rates, flexible tenures, and high loan-to-value ratios for both new and pre-owned cars.',
            images: [
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757237853/WhatsApp_Image_2025-09-07_at_3.06.10_PM_d8n3iz.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757237853/WhatsApp_Image_2025-09-07_at_3.06.11_PM_aolonf.jpg',
                'https://res.cloudinary.com/dhme90fr1/image/upload/v1757237853/WhatsApp_Image_2025-09-07_at_3.06.10_PM_1_hsvkki.jpg'
            ],
            subtypes: {
                'new': { name: 'New Car Loan', roi: '9.00%', tenure: '7 Years', eligibility: 'Minimum age of 21 years and a stable income source are required. Loan approval depends on the car model and your credit profile.', features: ['Funding up to 100% of the on-road price', 'Flexible repayment tenure up to 7 years', 'Quick processing and minimal paperwork', 'Special schemes and offers available'], documents: ['Pro-forma invoice from the car dealer', 'KYC documents', 'Income proof (Salary slip/ITR)', 'Bank statements'], faq: [ { q: 'What does "on-road price" include?', a: 'The on-road price includes the ex-showroom price, RTO registration charges, road tax, and insurance.' } ] },
                'used': { name: 'Used Car Loan', roi: '11.00%', tenure: '5 Years', eligibility: 'The car should not be more than 5-7 years old. A valuation report of the car from a certified professional is mandatory.', features: ['Get up to 90% of the car\'s valuation as a loan', 'Affordable EMIs', 'Helps in buying a better car within your budget', 'Thorough check on car documents by the bank'], documents: ['RC copy of the vehicle', 'Vehicle valuation report', 'Seller-buyer agreement', 'Standard KYC and income documents'], faq: [ { q: 'Is the interest rate for used car loans higher?', a: 'Yes, interest rates for used car loans are generally slightly higher than new car loans due to the higher perceived risk.' } ] },
            }
        },
        'lap-loan': {
            name: 'Loan Against Property',
            overview: 'Unlock the value of your property. A Loan Against Property (LAP) is a secured loan that you can avail by mortgaging your residential or commercial property. This is a great way to get a large loan amount at a lower interest rate for various purposes like business expansion, education, or weddings.',
            images: ['https://res.cloudinary.com/dhme90fr1/image/upload/v1757240471/WhatsApp_Image_2025-09-07_at_3.20.41_PM_yunya8.jpg'],
            subtypes: {}, roi: '9.50%', tenure: '15 Years',
            eligibility: 'Owner of the property (residential or commercial). The property must have a clear title and be free from any legal disputes. Your income and repayment capacity will also be assessed.',
            features: ['High loan amount based on property value', 'Lower interest rates compared to unsecured loans', 'Longer repayment tenure', 'Can be used for any personal or business purpose'],
            documents: ['Original property documents (Title Deed)', 'NOC from the society/builder', 'Latest property tax receipts', 'Standard KYC and income proofs'],
            faq: [ { q: 'Can I continue to use my property during the loan tenure?', a: 'Yes, you retain the ownership and can continue using your property as usual. Only the original documents are kept with the bank as security.' }, { q: 'What percentage of my property value can I get as a loan?', a: 'You can typically get a loan amount of up to 60-70% of the market value of your property.' } ]
        },
        'health-insurance': {
            name: 'Health Insurance',
            overview: 'Protect your health and finances. Health insurance provides a financial safety net against high medical expenses, ensuring you and your family receive the best possible care without financial worries.',
            images: ['https://placehold.co/800x500/ecfdf5/16a34a?text=Health+Insurance'],
            subtypes: {
                'individual': { name: 'Individual Health Cover', tenure: '1 Year', eligibility: 'Any individual between 18 to 65 years of age can purchase this policy.', features: ['Comprehensive coverage for hospitalization expenses', 'Cashless treatment at network hospitals', 'Tax benefits under Section 80D', 'No-claim bonus benefits'], documents: ['Age proof (Aadhaar, Passport)', 'Address proof', 'Identity proof', 'Medical check-up reports (if required)'], faq: [{q: 'What is a waiting period in health insurance?', a: 'A waiting period is the duration you must wait before you can claim some or all benefits of your health insurance policy. This is common for pre-existing conditions.'}] },
                'family': { name: 'Family Floater Plan', tenure: '1 Year', eligibility: 'Covers the entire family under a single policy, including self, spouse, children, and sometimes parents.', features: ['Single premium for the whole family', 'Sum insured floats among all family members', 'Cost-effective compared to individual policies', 'Comprehensive coverage'], documents: ['KYC documents of the primary insured person', 'Details of all family members to be covered'], faq: [{q: 'Can I add my parents to my family floater plan?', a: 'Some policies allow adding parents, but it\'s often recommended to get a separate senior citizen policy for them due to their higher health risks.'}] }
            }
        },
        'life-insurance': {
            name: 'Life Insurance',
            overview: 'Secure your family\'s future. Life insurance provides a lump-sum amount to your family in your absence, ensuring they can maintain their lifestyle and achieve their financial goals without any burden.',
            images: ['https://placehold.co/800x500/eef2ff/4f46e5?text=Life+Insurance'],
            subtypes: {
                'term': { name: 'Term Plan', tenure: 'Up to 85 years', eligibility: 'Available for individuals from 18 to 65 years. Provides high coverage at a low premium for a fixed term.', features: ['Pure risk cover', 'High sum assured at affordable premiums', 'Rider options for critical illness & accidental death', 'Tax benefits'], documents: ['Age & Identity Proof', 'Income Proof', 'Address Proof', 'Medical History'], faq: [{q: 'What happens if I survive the policy term?', a: 'In a pure term plan, no maturity benefit is paid if you survive the policy term. However, some plans now offer a "Return of Premium" option at a higher cost.'}] },
                'endowment': { name: 'Endowment Plan', tenure: '10-30 Years', eligibility: 'Combines insurance with savings. Suitable for long-term goal planning.', features: ['Dual benefit of insurance and savings', 'Guaranteed maturity benefit', 'Bonus additions', 'Loan facility available'], documents: ['KYC Documents', 'Income Proof', 'Age Proof'], faq: [{q: 'Is an endowment plan a good investment?', a: 'Endowment plans offer safe, guaranteed returns but are generally lower than market-linked products. They are good for risk-averse individuals.'}] }
            }
        },
        'vehicle-insurance': {
            name: 'Vehicle Insurance',
            overview: 'Drive with confidence. Vehicle insurance protects you against financial losses from accidents, theft, or damage to your vehicle, and also covers third-party liabilities as mandated by law.',
            images: ['https://placehold.co/800x500/fefce8/ca8a04?text=Vehicle+Insurance'],
            subtypes: {
                'car': { name: 'Car Insurance', tenure: '1 Year', eligibility: 'Mandatory for all car owners in India.', features: ['Covers damage to your own car (OD)', 'Covers third-party liability', 'No-Claim Bonus (NCB) for claim-free years', 'Add-ons like zero depreciation & roadside assistance'], documents: ['Vehicle Registration Certificate (RC)', 'Driving License of the owner/driver', 'Previous policy details (for renewal)'], faq: [{q: 'What is the difference between third-party and comprehensive insurance?', a: 'Third-party insurance is mandatory and only covers damages to another person or property. Comprehensive insurance covers third-party liability plus damage or theft of your own vehicle.'}] },
                'bike': { name: 'Bike Insurance', tenure: '1 Year', eligibility: 'Mandatory for all two-wheeler owners.', features: ['Affordable premium', 'Protection against accidents and theft', 'Third-party liability coverage', 'Personal accident cover for owner-driver'], documents: ['Vehicle RC', 'Driving License', 'Old policy copy for renewals'], faq: [{q: 'Is personal accident cover included by default?', a: 'Yes, a personal accident cover of ₹15 lakhs for the owner-driver is mandatory with bike insurance.'}] },
                'commercial': { name: 'Commercial Vehicle Insurance', tenure: '1 Year', eligibility: 'Required for all vehicles used for commercial purposes, such as trucks, buses, and taxis.', features: ['Covers goods-carrying and passenger-carrying vehicles', 'Mandatory third-party liability cover', 'Own Damage (OD) cover available', 'Legal and financial protection'], documents: ['Vehicle RC and Fitness Certificate', 'Permit Details', 'Driver\'s License'], faq: [{q: 'Does it cover the goods being transported?', a: 'No, standard commercial vehicle insurance does not cover the goods. For that, you would need a separate Marine or Goods in Transit insurance policy.'}] }
            }
        },
        'general-insurance': {
            name: 'General Insurance',
            overview: 'Protect your valuable assets. General insurance provides coverage for a wide range of non-life assets, including your shop, property, and even your travels, safeguarding you from unexpected financial losses.',
            images: ['https://placehold.co/800x500/f1f5f9/475569?text=General+Insurance'],
            subtypes: {
                'shop': { name: 'Shopkeeper Insurance', tenure: '1 Year', eligibility: 'For owners of small to medium-sized shops.', features: ['Protection against fire, theft, and natural calamities', 'Covers building, stock, and contents', 'Liability coverage options', 'All-in-one package policy'], documents: ['Shop registration documents', 'Address proof of the shop', 'List of contents to be insured'], faq: [{q: 'Does it cover loss of money in the shop?', a: 'Yes, many shopkeeper policies offer an add-on or built-in cover for loss of money in transit or from a safe.'}] },
                'property': { name: 'Property Insurance', tenure: '1 Year', eligibility: 'For owners of residential or commercial properties.', features: ['Coverage against fire, floods, earthquakes', 'Protection for building structure and contents', 'Option to include rent loss cover', 'Customizable plans'], documents: ['Proof of ownership', 'Valuation report of the property', 'Address proof'], faq: [{q: 'Is property insurance the same as home insurance?', a: 'Home insurance is a type of property insurance specifically for residential homes. Property insurance is a broader term that can also cover commercial buildings.'}] },
                'fire': { name: 'Fire Insurance', tenure: '1 Year', eligibility: 'For any individual or business that wants to protect their property against fire damage.', features: ['Covers damages due to fire, lightning, and explosions', 'Can be extended to cover riots, storms, and floods', 'Essential for businesses with high-value stock', 'Peace of mind'], documents: ['List of assets to be insured', 'Property ownership documents', 'Business registration (if applicable)'], faq: [{q: 'What is not covered in a standard fire policy?', a: 'Standard policies usually exclude damages from war, nuclear perils, and willful destruction of property.'}] },
                'travel': { name: 'Travel Insurance', tenure: 'Per Trip', eligibility: 'For individuals and families travelling domestically or internationally.', features: ['Covers medical emergencies abroad', 'Protection against trip cancellation or delay', 'Baggage loss or delay coverage', 'Cashless hospitalization worldwide'], documents: ['Passport copy (for international travel)', 'Ticket details', 'Basic KYC documents'], faq: [{q: 'Do I need travel insurance for domestic trips?', a: 'While not mandatory, it is highly recommended as it can cover flight cancellations, baggage loss, and medical emergencies even within the country.'}] }
            }
        }
    };

    const animatedElements = document.querySelectorAll('.animate-on-scroll');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('is-visible'); } });
    }, { threshold: 0.1 });
    animatedElements.forEach(el => observer.observe(el));

    function showPage(pageId) {
        pages.forEach(p => p.classList.remove('active'));
        
        const pageMappings = {
            'join-dsa': 'join-us-page',
            'join-connector': 'join-us-page',
            'eligibility-form': 'eligibility-form-page',
            'contact': 'contact-page' // Added for contact page
        };
        const isProductPage = Object.keys(productData).some(key => pageId.startsWith(key));
        const targetPageId = pageMappings[pageId] || (isProductPage ? 'loan-page-template' : `${pageId}-page`);
        
        const targetPage = document.getElementById(targetPageId) || document.getElementById('home-page');
        if(targetPage) {
            targetPage.classList.add('active');
            if (pageId === 'emi-calculator') renderEmiCalculator();
            if (isProductPage) renderLoanPage(pageId);

            if (pageId === 'join-dsa' || pageId === 'join-connector') {
                setTimeout(() => {
                    document.getElementById(pageId)?.scrollIntoView({ behavior: 'smooth' });
                }, 100);
            } else {
                 window.scrollTo(0, 0);
            }
        }

        const newActivePage = document.querySelector('.page.active');
        if(newActivePage){
            newActivePage.querySelectorAll('.animate-on-scroll').forEach(el => {
                el.classList.remove('is-visible');
                observer.observe(el);
            });
        }
        mobileMenuContainer.classList.add('hidden');
    }
    
    function renderLoanPage(pageId) {
        const parts = pageId.split('-');
        const mainCategoryKey = parts.slice(0, 2).join('-');
        const subTypeKey = parts.length > 2 ? parts.slice(2).join('-') : null;
        
        const mainCategory = productData[mainCategoryKey];
        if (!mainCategory) { console.error('Category not found for', pageId); return; }
        
        const subtype = subTypeKey ? mainCategory.subtypes[subTypeKey] : null;
        const contentData = subtype || mainCategory;
        const isInsurance = pageId.includes('insurance');
        const images = mainCategory.images || [];

        let breadcrumbHtml = `<a href="#home" class="page-link hover:text-orange-600">Home</a> <span class="mx-2">/</span> <a href="#${mainCategoryKey}" class="page-link hover:text-orange-600">${mainCategory.name}</a>`;
        if (subtype) {
             breadcrumbHtml += ` <span class="mx-2">/</span> <span class="font-semibold text-gray-800">${subtype.name}</span>`;
        } else {
             breadcrumbHtml += ` <span class="mx-2">/</span> <span class="font-semibold text-gray-800">Overview</span>`;
        }
        breadcrumbsContainer.innerHTML = breadcrumbHtml;
        addLinkListeners(breadcrumbsContainer);

        let sidebarHtml = `<h3 class="text-xl font-bold mb-4">${mainCategory.name}</h3><ul>`;
        const baseKey = mainCategoryKey;
        sidebarHtml += `<li><a href="#${baseKey}" class="sidebar-link page-link block p-2 rounded-md hover:bg-orange-500 hover:text-white ${!subtype ? 'active' : ''}">Overview</a></li>`;
        for (const key in mainCategory.subtypes) {
            sidebarHtml += `<li><a href="#${baseKey}-${key}" class="sidebar-link page-link block p-2 rounded-md hover:bg-orange-500 hover:text-white ${subTypeKey === key ? 'active' : ''}">${mainCategory.subtypes[key].name}</a></li>`;
        }
        sidebarHtml += `</ul>`;
        sidebarContainer.innerHTML = sidebarHtml;
        addLinkListeners(sidebarContainer);
        
        let infoGridHtml = '';
        if (isInsurance) {
             infoGridHtml = `<div class="bg-blue-50 p-4 rounded-lg"><p class="text-sm text-gray-600">Policy Tenure</p><p class="text-xl font-bold text-blue-700">${contentData.tenure}</p></div>`;
        } else {
             infoGridHtml = `
                <div class="bg-orange-50 p-4 rounded-lg"><p class="text-sm text-gray-600">Starting ROI</p><p class="text-xl font-bold text-orange-700">${contentData.roi}*</p></div>
                <div class="bg-blue-50 p-4 rounded-lg"><p class="text-sm text-gray-600">Max Tenure</p><p class="text-xl font-bold text-blue-700">${contentData.tenure}</p></div>`;
        }

        let calculatorHtml = '';
        if (!isInsurance) {
            calculatorHtml = `
                <div>
                    <h2 class="text-2xl font-bold mt-8 mb-4">EMI Calculator</h2>
                    <div class="bg-gray-50 p-6 rounded-lg border">
                        <form class="emi-calculator-form grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                            <div><label class="block font-medium">Loan Amount (₹)</label><input type="number" class="loan-amount w-full mt-1 p-2 border rounded" value="1000000" required></div>
                            <div><label class="block font-medium">Interest Rate (%)</label><input type="number" step="0.01" class="loan-rate w-full mt-1 p-2 border rounded" value="${parseFloat(contentData.roi) || 10}" required></div>
                            <div><label class="block font-medium">Tenure (Years)</label><input type="number" class="loan-tenure w-full mt-1 p-2 border rounded" value="${parseInt(contentData.tenure) || 10}" required></div>
                            <button type="submit" class="bg-gray-800 text-white font-semibold py-2 px-4 rounded-lg hover:bg-black w-full">Calculate</button>
                        </form>
                        <div class="mt-4 text-center"><p class="text-lg">Your Monthly EMI is:</p><p class="emi-result text-3xl font-bold text-orange-600 mt-1">₹0</p></div>
                    </div>
                </div>`;
        }
        
        const imageCarouselHtml = `
            <div class="swiper-container loan-image-carousel rounded-lg overflow-hidden">
                <div class="swiper-wrapper">
                    ${images.map(img => `<div class="swiper-slide"><img src="${img}" alt="${mainCategory.name}"></div>`).join('')}
                </div>
                <div class="swiper-button-next text-white"></div>
                <div class="swiper-button-prev text-white"></div>
                <div class="swiper-pagination"></div>
            </div>`;


        let mainContentHtml = `
            <div class="bg-white p-8 rounded-lg shadow-md space-y-8">
                <div>
                    <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">${contentData.name}</h1>
                    <p class="text-lg text-gray-600">${subtype ? contentData.eligibility : contentData.overview}</p>
                </div>
                ${imageCarouselHtml}
                
                <div class="grid md:grid-cols-3 gap-4 text-center">
                    ${infoGridHtml}
                    <div class="bg-green-50 p-4 rounded-lg"><p class="text-sm text-gray-600">${isInsurance ? 'Coverage' : 'Loan Amount'}</p><p class="text-xl font-bold text-green-700">As per Profile</p></div>
                </div>

                <div class="grid md:grid-cols-2 gap-8 pt-6">
                    <div>
                        <h3 class="text-2xl font-bold mb-4">Features & Benefits</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">${(contentData.features || []).map(f => `<li>${f}</li>`).join('')}</ul>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold mb-4">Documents Required</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">${(contentData.documents || []).map(d => `<li>${d}</li>`).join('')}</ul>
                    </div>
                </div>

                 <div>
                    <h3 class="text-2xl font-bold mb-4">Frequently Asked Questions (FAQ)</h3>
                    <div class="space-y-4">${(contentData.faq || []).map(f => `
                        <div class="border rounded-lg">
                            <div class="faq-question flex justify-between items-center p-4">
                                <h4 class="font-semibold">${f.q}</h4>
                                <svg class="w-5 h-5 transition-transform transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                            <div class="faq-answer px-4 pb-4 text-gray-600"><p>${f.a}</p></div>
                        </div>`).join('')}
                    </div>
                </div>
                ${calculatorHtml}
                <div class="text-center pt-6"><a href="#eligibility-form" class="page-link bg-green-500 text-white font-bold py-3 px-12 rounded-lg hover:bg-green-600 transition-colors text-lg">${isInsurance ? 'Get a Quote' : 'Apply Now'}</a></div>
            </div>`;
        mainContentContainer.innerHTML = mainContentHtml;
        addLinkListeners(mainContentContainer);
        
        new Swiper('.loan-image-carousel', {
            loop: true,
            autoplay: {
                delay: 3000,
                disableOnInteraction: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            effect: 'fade',
            fadeEffect: {
                crossFade: true
            },
        });
        
        if (!isInsurance) {
            mainContentContainer.querySelector('.emi-calculator-form').addEventListener('submit', handleEmiCalculation);
        }

        mainContentContainer.querySelectorAll('.faq-question').forEach(q => q.addEventListener('click', () => {
            const answer = q.nextElementSibling;
            const icon = q.querySelector('svg');
            if(answer.style.maxHeight) {
                answer.style.maxHeight = null;
                icon.style.transform = 'rotate(0deg)';
            } else {
                answer.style.maxHeight = answer.scrollHeight + "px";
                icon.style.transform = 'rotate(180deg)';
            }
        }));
    }

    function handleEmiCalculation(e) {
        e.preventDefault();
        const form = e.target;
        const amount = parseFloat(form.querySelector('.loan-amount').value);
        const rate = parseFloat(form.querySelector('.loan-rate').value);
        const tenure = parseFloat(form.querySelector('.loan-tenure').value);
        const resultContainer = form.nextElementSibling.querySelector('.emi-result');
        if(amount > 0 && rate > 0 && tenure > 0) {
            const monthlyRate = rate / (12 * 100);
            const n = tenure * 12;
            const emi = (amount * monthlyRate * Math.pow(1 + monthlyRate, n)) / (Math.pow(1 + monthlyRate, n) - 1);
            resultContainer.textContent = `₹${Math.round(emi).toLocaleString('en-IN')}`;
        } else {
            resultContainer.textContent = '₹0';
        }
    }

    function renderEmiCalculator() {
        emiCalculatorPage.innerHTML = `
            <div class="bg-gray-100">
                <div class="container mx-auto px-6 py-12">
                    <div class="text-center mb-12">
                        <h1 class="text-4xl font-bold">Smart EMI Calculator</h1>
                        <p class="text-gray-600 mt-2">Plan your finances with our AI-powered EMI tools.</p>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                        <div class="lg:col-span-3 bg-white p-8 rounded-lg shadow-lg">
                            <h2 class="text-2xl font-bold mb-6">Calculate Your EMI</h2>
                            <form id="main-emi-form" class="space-y-4">
                                <div>
                                    <label for="loan-type" class="block font-medium">Loan Type</label>
                                    <select id="loan-type" class="w-full mt-1 p-3 border rounded-lg bg-white">
                                        <option value="8.50">Home Loan</option>
                                        <option value="10.99">Personal Loan</option>
                                        <option value="11.75">Business Loan</option>
                                        <option value="9.00">Car Loan</option>
                                        <option value="9.50">Loan Against Property</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="emi-amount" class="block font-medium">Loan Amount (₹)</label>
                                    <input type="number" id="emi-amount" class="w-full mt-1 p-3 border rounded-lg" value="2500000" required>
                                </div>
                                <div>
                                    <label for="emi-rate" class="block font-medium">Interest Rate (% p.a.)</label>
                                    <input type="number" step="0.01" id="emi-rate" class="w-full mt-1 p-3 border rounded-lg" value="8.50" required>
                                </div>
                                <div>
                                    <label for="emi-tenure" class="block font-medium">Loan Tenure (Years)</label>
                                    <input type="number" id="emi-tenure" class="w-full mt-1 p-3 border rounded-lg" value="20" required>
                                </div>
                                 <div>
                                    <label for="bank-preference" class="block font-medium">Bank Preference (Optional)</label>
                                    <input type="text" id="bank-preference" class="w-full mt-1 p-3 border rounded-lg" placeholder="e.g., HDFC, SBI, ICICI">
                                </div>
                                <button type="submit" class="w-full bg-orange-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors">Calculate</button>
                            </form>
                            <div id="emi-main-result" class="mt-6 text-center bg-gray-50 p-6 rounded-lg">
                                <!-- Result displayed here -->
                            </div>
                        </div>

                        <div class="lg:col-span-2 space-y-6">
                            <div class="bg-white p-6 rounded-lg shadow-lg">
                                <h3 class="font-bold text-lg mb-3">💡 AI Smart Suggestions</h3>
                                <div id="ai-suggestions" class="text-sm text-gray-700 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                                    <p>Enter your loan details to get personalized suggestions for saving money.</p>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow-lg">
                                <h3 class="font-bold text-lg mb-3">📑 Download EMI Calendar</h3>
                                <p class="text-sm text-gray-600 mb-4">Get a detailed amortization schedule for your loan.</p>
                                <div class="flex gap-2">
                                    <button id="download-schedule-btn" class="w-full bg-gray-800 text-white font-semibold py-2 px-4 rounded-lg hover:bg-black" disabled>Download PDF</button>
                                </div>
                                 <h3 class="font-bold text-lg mt-4 mb-2">Set Reminders</h3>
                                <div class="flex gap-2">
                                     <button id="gcal-reminder-btn" class="w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-600" disabled>Google Calendar</button>
                                     <button id="wa-reminder-btn" class="w-full bg-green-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-600" disabled>WhatsApp</button>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div class="mt-8 bg-white p-8 rounded-lg shadow-lg">
                        <h2 class="text-2xl font-bold mb-4">Monthly EMI Breakdown</h2>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Principal</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Interest</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">EMI Paid</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Balance</th>
                                    </tr>
                                </thead>
                                <tbody id="emi-calendar-table" class="bg-white divide-y divide-gray-200">
                                    <!-- Rows will be inserted here by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>`;

        const form = document.getElementById('main-emi-form');
        const loanTypeSelect = document.getElementById('loan-type');
        const rateInput = document.getElementById('emi-rate');
        
        loanTypeSelect.addEventListener('change', (e) => {
            rateInput.value = e.target.value;
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            calculateAndDisplayMainEmi();
        });

        document.getElementById('download-schedule-btn').addEventListener('click', generatePdf);
        document.getElementById('gcal-reminder-btn').addEventListener('click', setGoogleCalendarReminder);
        document.getElementById('wa-reminder-btn').addEventListener('click', setWhatsAppReminder);

        calculateAndDisplayMainEmi(); // Initial calculation
    }

    function calculateAndDisplayMainEmi() {
        const amount = parseFloat(document.getElementById('emi-amount').value);
        const rate = parseFloat(document.getElementById('emi-rate').value);
        const tenure = parseFloat(document.getElementById('emi-tenure').value);
        const resultContainer = document.getElementById('emi-main-result');
        const suggestionsContainer = document.getElementById('ai-suggestions');
        const downloadBtn = document.getElementById('download-schedule-btn');
        const gcalBtn = document.getElementById('gcal-reminder-btn');
        const waBtn = document.getElementById('wa-reminder-btn');
        const tableBody = document.getElementById('emi-calendar-table');

        tableBody.innerHTML = '<tr><td colspan="5" class="text-center p-4">Calculate EMI to see the breakdown.</td></tr>';

        if (amount > 0 && rate > 0 && tenure > 0) {
            const monthlyRate = rate / (12 * 100);
            const n = tenure * 12;
            const emi = (amount * monthlyRate * Math.pow(1 + monthlyRate, n)) / (Math.pow(1 + monthlyRate, n) - 1);
            const totalPayment = emi * n;
            const totalInterest = totalPayment - amount;

            resultContainer.innerHTML = `
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <div><p class="text-sm text-gray-500">Monthly EMI</p><p class="text-2xl font-bold text-orange-600">₹${Math.round(emi).toLocaleString('en-IN')}</p></div>
                    <div><p class="text-sm text-gray-500">Total Interest</p><p class="text-2xl font-bold">₹${Math.round(totalInterest).toLocaleString('en-IN')}</p></div>
                    <div><p class="text-sm text-gray-500">Total Payment</p><p class="text-2xl font-bold">₹${Math.round(totalPayment).toLocaleString('en-IN')}</p></div>
                </div>`;
            
            // AI Suggestions
            let suggestion = "Consider a shorter tenure to save on interest. ";
            if (tenure > 5) {
                const shorterTenure = tenure > 10 ? tenure - 5 : Math.ceil(tenure/2);
                const shorter_n = shorterTenure * 12;
                const shorter_emi = (amount * monthlyRate * Math.pow(1 + monthlyRate, shorter_n)) / (Math.pow(1 + monthlyRate, shorter_n) - 1);
                const shorter_totalPayment = shorter_emi * shorter_n;
                const savedInterest = totalPayment - shorter_totalPayment;
                if (savedInterest > 0) {
                    suggestion += `By choosing a ${shorterTenure}-year tenure, you could save <strong class="text-green-600">₹${Math.round(savedInterest).toLocaleString('en-IN')}</strong> in interest! Your new EMI would be ₹${Math.round(shorter_emi).toLocaleString('en-IN')}.`;
                }
            } else {
                 suggestion = "This looks like a good plan. A shorter tenure generally saves you more in interest payments over time."
            }
            suggestionsContainer.innerHTML = `<p>${suggestion}</p>`;

            // Populate table
            let balance = amount;
            let tableHtml = '';
            const today = new Date();
            for (let i = 1; i <= n; i++) {
                const interest = balance * monthlyRate;
                const principal = emi - interest;
                balance -= principal;
                const paymentDate = new Date(today.getFullYear(), today.getMonth() + i, today.getDate());
                tableHtml += `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${paymentDate.toLocaleDateString('en-IN')}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">₹${Math.round(principal).toLocaleString('en-IN')}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">₹${Math.round(interest).toLocaleString('en-IN')}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">₹${Math.round(emi).toLocaleString('en-IN')}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">₹${Math.round(balance > 0 ? balance : 0).toLocaleString('en-IN')}</td>
                    </tr>`;
            }
            tableBody.innerHTML = tableHtml;

            [downloadBtn, gcalBtn, waBtn].forEach(btn => btn.disabled = false);
        } else {
             resultContainer.innerHTML = '<p>Please enter valid loan details.</p>';
             suggestionsContainer.innerHTML = '<p>Enter loan details to get suggestions.</p>';
             [downloadBtn, gcalBtn, waBtn].forEach(btn => btn.disabled = true);
        }
    }

    function setGoogleCalendarReminder() {
        const emi = document.querySelector('#emi-main-result .text-orange-600').textContent;
        const eventTitle = `Pay Loan EMI of ${emi}`;
        const eventDetails = `Don't forget to pay your loan EMI. For any queries, contact Shree Karni Kripa Associates.`;
        const today = new Date();
        const nextMonth = new Date(today.getFullYear(), today.getMonth() + 1, 5, 10, 0, 0); // 5th of next month at 10 AM
        
        const formatDate = (date) => date.toISOString().replace(/-|:|\.\d+/g, '');
        
        const startDate = formatDate(nextMonth);
        const endDate = formatDate(new Date(nextMonth.getTime() + 60 * 60 * 1000)); // 1 hour duration
        
        const url = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventTitle)}&dates=${startDate}/${endDate}&details=${encodeURIComponent(eventDetails)}&recur=RRULE:FREQ=MONTHLY`;
        
        window.open(url, '_blank');
    }

    function setWhatsAppReminder(){
        const emi = document.querySelector('#emi-main-result .text-orange-600').textContent;
        const phone = '919214104963'; 
        const message = `Hello SKF Ajmer, please set a monthly reminder for my loan EMI of ${emi}.`;
        window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');
    }

    function generatePdf() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const img = new Image();
        img.src = 'https://res.cloudinary.com/diqo7qmnw/image/upload/v1754217266/logo1_lt1w3w.png';
        
        img.onload = function() {
            // Header
            doc.addImage(img, 'PNG', 14, 10, 20, 20);
            doc.setFontSize(16);
            doc.text("Shree Karni Kripa Associates", 105, 18, { align: 'center'});
            doc.setFontSize(10);
            doc.text("9214104963 | 9352358494", 105, 24, { align: 'center'});
            doc.setDrawColor(200);
            doc.line(14, 32, 196, 32);

            // Watermark
            doc.setFontSize(50);
            doc.setTextColor(230);
            doc.text("SKF Ajmer", 105, 150, { align: 'center', angle: 45 });
            doc.setTextColor(0);

            const amount = parseFloat(document.getElementById('emi-amount').value);
            const rate = parseFloat(document.getElementById('emi-rate').value);
            const tenure = parseFloat(document.getElementById('emi-tenure').value);

            doc.autoTable({
                startY: 40,
                head: [['Loan Details', 'Value']],
                body: [
                    ['Loan Amount', `Rs. ${amount.toLocaleString('en-IN')}`],
                    ['Interest Rate', `${rate}% p.a.`],
                    ['Loan Tenure', `${tenure} Years`],
                ],
                theme: 'striped'
            });

            const monthlyRate = rate / 12 / 100;
            const numPayments = tenure * 12;
            const emi = (amount * monthlyRate * Math.pow(1 + monthlyRate, numPayments)) / (Math.pow(1 + monthlyRate, numPayments) - 1);

            let balance = amount;
            const tableData = [];
            const today = new Date();
             for (let i = 1; i <= numPayments; i++) {
                const interest = balance * monthlyRate;
                const principal = emi - interest;
                balance -= principal;
                const paymentDate = new Date(today.getFullYear(), today.getMonth() + i, today.getDate());
                tableData.push([
                    paymentDate.toLocaleDateString('en-IN'),
                    `Rs. ${Math.round(principal).toLocaleString('en-IN')}`,
                    `Rs. ${Math.round(interest).toLocaleString('en-IN')}`,
                    `Rs. ${Math.round(balance > 0 ? balance : 0).toLocaleString('en-IN')}`,
                ]);
            }

            doc.autoTable({
                startY: doc.lastAutoTable.finalY + 10,
                head: [['Date', 'Principal', 'Interest', 'Balance']],
                body: tableData,
                theme: 'grid'
            });

            // Footer
            const pageCount = doc.internal.getNumberOfPages();
            for(let i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                doc.setFontSize(8);
                doc.setTextColor(150);
                doc.text('www.shreekarnikripa.com | 2nd floor, Bhansali Complex, Kayad Road, Ajmer', 105, 287, { align: 'center' });
            }

            doc.save('EMI_Schedule_SKF_Ajmer.pdf');
        };
    }

    function handleLinkClick(e) {
        const href = this.getAttribute('href');
        if (href && href.startsWith('#')) {
            e.preventDefault();
            window.location.hash = href;
        }
    }
    
    function addLinkListeners(container){
        container.querySelectorAll('.page-link').forEach(link => link.addEventListener('click', handleLinkClick));
    }
    
    addLinkListeners(document);
     window.addEventListener('hashchange', () => {
        let hash = window.location.hash.substring(1) || 'home';
        showPage(hash);
    });
    
    mobileMenuButton.addEventListener('click', () => mobileMenuContainer.classList.toggle('hidden'));
    sidebarToggleButton.addEventListener('click', () => {
        sidebarContainer.classList.add('open');
        sidebarOverlay.classList.add('open');
    });
    sidebarOverlay.addEventListener('click', () => {
        sidebarContainer.classList.remove('open');
        sidebarOverlay.classList.remove('open');
    });

    // Mobile menu generation logic
    const desktopMenu = document.querySelector('nav ul.hidden.lg\\:flex');
    if (desktopMenu) {
        mobileMenuContainer.innerHTML = desktopMenu.innerHTML;
        mobileMenuContainer.querySelectorAll('.dropdown-menu, .dropdown-menu-level-2').forEach(menu => {
            menu.classList.remove('absolute', 'hidden');
            menu.classList.add('pl-4');
        });
        mobileMenuContainer.querySelectorAll('.dropdown-submenu').forEach(submenu => {
            const link = submenu.querySelector('a');
            if(link) {
                 link.addEventListener('click', (e) => {
                     e.preventDefault();
                     const sublist = submenu.querySelector('ul');
                     if(sublist) sublist.classList.toggle('hidden');
                 });
                 const sublist = submenu.querySelector('ul');
                 if(sublist) sublist.classList.add('hidden');
            }
        });
        addLinkListeners(mobileMenuContainer);
    }
    
    // Initial Page Load
    let initialHash = window.location.hash.substring(1) || 'home';
    showPage(initialHash);
    
    // --- JOIN US FORM LOGIC ---
    function handleJoinFormSubmit(e) {
        e.preventDefault();
        const form = e.target;
        const role = form.dataset.role;
        const name = form.querySelector('input[name="fullName"]').value;
        const mobile = form.querySelector('input[name="mobile"]').value;
        const email = form.querySelector('input[name="email"]').value;
        const city = form.querySelector('input[name="city"]').value;
        
        let message = `Hello SKF Ajmer, I would like to apply as a ${role}.\n\n`;
        message += `Name: ${name}\n`;
        message += `Mobile: ${mobile}\n`;
        message += `Email: ${email}\n`;
        message += `City/Pincode: ${city}\n`;

        if (role === 'DSA') {
            const experience = form.querySelector('input[name="experience"]').value;
            message += `Experience: ${experience}\n`;
        } else {
            const notes = form.querySelector('textarea[name="notes"]').value;
            message += `Notes: ${notes}\n`;
        }

        const whatsappNumber = '919214104963';
        const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
        window.open(url, '_blank');
        form.reset();
    }
    
    document.getElementById('dsa-form')?.addEventListener('submit', handleJoinFormSubmit);
    document.getElementById('connector-form')?.addEventListener('submit', handleJoinFormSubmit);

    // --- SMART ELIGIBILITY FORM LOGIC ---
    const eligibilityForm = document.getElementById('smart-eligibility-form');
    if (eligibilityForm) {
        const employmentRadios = eligibilityForm.querySelectorAll('input[name="employmentType"]');
        const salaryField = document.getElementById('salary-field');
        const incomeField = document.getElementById('income-field');
        
        const runningLoanRadios = eligibilityForm.querySelectorAll('input[name="runningLoan"]');
        const runningLoanDetails = document.getElementById('running-loan-details');
        
        const teamMemberMapping = {
            'Home Loan': { name: 'Krishna Singh', number: '918118838772' },
            'LAP': { name: 'Krishna Singh', number: '918118838772' },
            'Personal Loan': { name: 'Saroj Choudhary', number: '918118822628' },
            'Business Loan': { name: 'Sona Mulani', number: '919352358494' },
            'Car Loan': { name: 'Manu Mam', number: '919358973156' },
            'Insurance': { name: 'Rajendra Singh', number: '919214104963' }
        };

        employmentRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                if (radio.value === 'Job') {
                    salaryField.classList.remove('hidden');
                    incomeField.classList.add('hidden');
                } else {
                    salaryField.classList.add('hidden');
                    incomeField.classList.remove('hidden');
                }
            });
        });

        runningLoanRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                if (radio.value === 'Yes') {
                    runningLoanDetails.classList.remove('hidden');
                } else {
                    runningLoanDetails.classList.add('hidden');
                }
            });
        });

        eligibilityForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(eligibilityForm);
            const data = Object.fromEntries(formData.entries());

            // --- DATA SUBMISSION TO GOOGLE SHEET ---
            const runningLoanDetailsText = data.runningLoan === 'Yes' ?
                `EMI: ₹${data.emiAmount || 'N/A'}, Outstanding: ₹${data.outstandingLoan || 'N/A'}, Status: ${data.overdueStatus || 'N/A'}` :
                'No';
            
            const sheetPayload = {
                name: data.fullName,
                mobile: data.mobileNumber,
                city: data.city,
                pincode: data.pincode,
                employment: data.employmentType,
                income: data.monthlySalary || data.monthlyIncome,
                runningLoan: data.runningLoan,
                runningLoanDetails: runningLoanDetailsText,
                loanAmount: data.requiredLoanAmount,
                product: data.loanType,
                // These fields are not in the form, so send as blank
                insuranceType: '',
                tenure: '',
                emi: '',
                roi: ''
            };
            sendDataToGoogleSheet(sheetPayload);
            // --- END OF GOOGLE SHEET SUBMISSION ---

            const loanType = data.loanType;
            const forwardTo = teamMemberMapping[loanType] || { name: 'Rajendra Singh', number: '919214104963' };

            let message = '📩 *New Loan Enquiry (from Eligibility Form)*\n\n';
            message += `🔹 *Name:* ${data.fullName}\n`;
            message += `📞 *Mobile:* ${data.mobileNumber}\n`;
            message += `🏙 *City:* ${data.city}\n`;
            message += `📍 *Pincode:* ${data.pincode}\n`;
            message += `💼 *Employment Type:* ${data.employmentType}\n`;

            if (data.employmentType === 'Job') {
                message += `💰 *Monthly Salary:* ₹${data.monthlySalary}\n`;
            } else {
                message += `💰 *Monthly Income:* ₹${data.monthlyIncome}\n`;
            }

            message += `📊 *Running Loan:* ${data.runningLoan}\n`;
            if (data.runningLoan === 'Yes') {
                message += `   - *EMI Amount:* ₹${data.emiAmount}\n`;
                message += `   - *Outstanding Loan:* ₹${data.outstandingLoan}\n`;
                message += `   - *Status:* ${data.overdueStatus}\n`;
            }

            message += `🏦 *Loan Type:* ${data.loanType}\n`;
            message += `💸 *Required Loan Amount:* ₹${data.requiredLoanAmount}\n`;

            const url = `https://wa.me/${forwardTo.number}?text=${encodeURIComponent(message)}`;
            
            // Show Thank You Modal and trigger confetti
            showThankYouModal(url);
        });
    }

    // --- AI Maaru Chatbot Full Logic ---
    const chatContainer = document.getElementById('chat-container');
    chatContainer.innerHTML = `
        <div id="proactive-bubble-container"></div>
        <div id="chat-window" class="flex">
            <div id="chat-header">
                <div id="chat-header-info">
                    <img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756922191/0ac343a99b4616c8613031e182fd2f48_pqplyp.png" alt="AI Maaru">
                    <div><h3>AI MAARU MITRA</h3><p>Your SKF Assistant</p></div>
                </div>
                <button id="chat-close-btn">&times;</button>
            </div>
            <div id="chat-messages"></div>
            <div id="chat-quick-replies" class="p-3 bg-white border-t border-gray-200"></div>
            <div id="chat-input-container">
                <input type="text" id="chat-input" placeholder="Type your message...">
                <button id="chat-send-btn">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                </button>
            </div>
        </div>
        <button id="chat-toggle-button"><img src="https://res.cloudinary.com/dhme90fr1/image/upload/v1756922191/0ac343a99b4616c8613031e182fd2f48_pqplyp.png" alt="Chat with AI Maaru"></button>`;
        
    const chatWindow = document.getElementById('chat-window');
    const chatToggleBtn = document.getElementById('chat-toggle-button');
    const chatCloseBtn = document.getElementById('chat-close-btn');
    const chatMessages = document.getElementById('chat-messages');
    const chatInput = document.getElementById('chat-input');
    const chatSendBtn = document.getElementById('chat-send-btn');
    const chatQuickReplies = document.getElementById('chat-quick-replies');
    const chatInputContainer = document.getElementById('chat-input-container');
    const confettiContainer = document.getElementById('confetti-container');

    let state = 'AWAITING_PRODUCT';
    let userData = { purpose: null, product: null };
    let clarificationAttempts = 0;

    const teamNumbers = {
        'Home Loan': '918118838772',
        'Loan Against Property': '918118838772',
        'Personal Loan': '918118822628',
        'Business Loan': '919352358494',
        'Car Loan': '919358973156',
        'Insurance': '919214104963',
        'fallback': '919214104963'
    };

    const toggleChatWindow = () => {
        const isOpening = chatWindow.style.display !== 'flex';
        chatWindow.style.display = isOpening ? 'flex' : 'none';
        if (isOpening) {
            hideProactiveBubble();
            if (chatMessages.children.length === 0) startConversation();
        }
    };
    
    chatToggleBtn.addEventListener('click', toggleChatWindow);
    chatCloseBtn.addEventListener('click', toggleChatWindow);

    function addBotMessage(message, delay = 500) {
        setTimeout(() => {
            const messageEl = document.createElement('div');
            messageEl.className = 'ai-bubble chat-bubble';
            messageEl.innerHTML = message;
            chatMessages.appendChild(messageEl);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }, delay);
    }

    function addUserMessage(message) {
        const messageEl = document.createElement('div');
        messageEl.className = 'user-bubble chat-bubble';
        messageEl.innerHTML = message;
        chatMessages.appendChild(messageEl);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        chatInput.value = '';
    }
    
    function showQuickReplies(replies) {
        chatQuickReplies.innerHTML = '';
        chatInputContainer.style.display = 'none';
        const container = document.createElement('div');
        container.className = 'flex flex-wrap justify-center gap-2';
        
        replies.forEach(reply => {
            const button = document.createElement('button');
            button.innerText = reply.label;
            button.className = 'px-4 py-2 bg-orange-100 text-orange-700 font-semibold rounded-full hover:bg-orange-200 transition';
            button.onclick = () => {
                addUserMessage(reply.label);
                handleUserInput(reply.value);
                chatQuickReplies.innerHTML = '';
                chatInputContainer.style.display = 'flex';
                chatInput.focus();
            };
            container.appendChild(button);
        });
        chatQuickReplies.appendChild(container);
    }
    
    function showFinalButtons(buttons) {
        chatQuickReplies.innerHTML = '';
        chatInputContainer.style.display = 'none';
        const container = document.createElement('div');
        container.className = 'flex flex-wrap justify-center gap-3 p-2';

        buttons.forEach(buttonInfo => {
            const button = document.createElement('button');
            button.innerText = buttonInfo.label;
            button.className = buttonInfo.class;
            button.onclick = buttonInfo.action;
            container.appendChild(button);
        });
        chatQuickReplies.appendChild(container);
    }

    function startConversation() {
        addBotMessage("🙏 जय माता जी — मैं SKF से आपका मददगार हूँ।");
        setTimeout(() => {
            addBotMessage("बताइए आपको किस loan या insurance की ज़रूरत है?");
            showQuickReplies([
                { label: '🏡 Home Loan', value: 'Home Loan' },
                { label: '💼 Business Loan', value: 'Business Loan' },
                { label: '👤 Personal Loan', value: 'Personal Loan' },
                { label: '🚗 Car Loan', value: 'Car Loan' },
                { label: '💰 Loan Against Property', value: 'Loan Against Property' },
                { label: '🛡️ Insurance', value: 'Insurance' }
            ]);
        }, 600);
        state = 'AWAITING_PURPOSE';
    }

    function handleUserInput(text) {
        clarificationAttempts = 0; // Reset on valid input
        switch (state) {
            case 'AWAITING_PURPOSE': processPurpose(text); break;
            case 'AWAITING_NAME': processName(text); break;
            case 'AWAITING_MOBILE': processMobile(text); break;
            case 'AWAITING_CITY': processCity(text); break;
            case 'AWAITING_PINCODE': processPincode(text); break;
            case 'AWAITING_EMPLOYMENT': processEmployment(text); break;
            case 'AWAITING_INCOME': processIncome(text); break;
            case 'AWAITING_RUNNING_LOAN': processRunningLoan(text); break;
            case 'AWAITING_LOAN_DETAILS': processLoanDetails(text); break;
            case 'AWAITING_LOAN_AMOUNT': processLoanAmount(text); break;
            case 'AWAITING_TENURE': processTenure(text); break;
            case 'AWAITING_INSURANCE_TYPE': processInsuranceType(text); break;
        }
    }

    function processPurpose(text) {
        const p = text.toLowerCase();
        if (p.includes('home') || p.includes('house') || p.includes('flat')) userData.product = 'Home Loan';
        else if (p.includes('personal')) userData.product = 'Personal Loan';
        else if (p.includes('business') || p.includes('shop')) userData.product = 'Business Loan';
        else if (p.includes('car') || p.includes('bike') || p.includes('vehicle')) userData.product = 'Car Loan';
        else if (p.includes('property') || p.includes('lap')) userData.product = 'Loan Against Property';
        else if (p.includes('insurance')) {
            userData.product = 'Insurance';
            askInsuranceType();
            return;
        } else {
            handleUnclearInput("माफ़ कीजिए, मैं समझ नहीं पाया। क्या आप Home Loan, Personal Loan, Business Loan, Car Loan, LAP या Insurance में से कुछ ढूंढ रहे हैं?");
            return;
        }
        userData.purpose = text;
        addBotMessage(`Great! ${userData.product} के लिए, मुझे आपसे कुछ details चाहिए होंगी।`);
        askName();
    }
    
    function askInsuranceType() {
        state = 'AWAITING_INSURANCE_TYPE';
        addBotMessage("ज़रूर, आप किस तरह का insurance करवाना चाहते हैं?");
        showQuickReplies([
            {label: 'Health Insurance', value: 'Health'},
            {label: 'Life Insurance', value: 'Life'},
            {label: 'Vehicle Insurance', value: 'Vehicle'}
        ]);
    }

    function processInsuranceType(type) {
        userData.insuranceType = type;
        addBotMessage(`ठीक है, ${type} Insurance के लिए, मुझे कुछ जानकारी चाहिए।`);
        askName();
    }

    function askName() { state = 'AWAITING_NAME'; addBotMessage("आपका पूरा नाम क्या है?"); }
    function processName(name) {
        if (name.trim().length < 3) { handleUnclearInput("Please अपना पूरा नाम बताएं।"); return; }
        userData.name = name.trim();
        askMobile();
    }
    
    function askMobile() { state = 'AWAITING_MOBILE'; addBotMessage("आपका 10-digit mobile number दीजिए।"); }
    function processMobile(mobile) {
        if (!/^[6-9]\d{9}$/.test(mobile.trim())) { handleUnclearInput("यह एक valid mobile number नहीं लग रहा। कृपया 10-digit number दें जो 6, 7, 8, या 9 से शुरू हो।"); return; }
        userData.mobile = mobile.trim();
        askCity();
    }

    function askCity() { state = 'AWAITING_CITY'; addBotMessage("आप किस शहर से हैं?"); }
    function processCity(city) {
        if(city.trim().length < 2) { handleUnclearInput("Please अपने शहर का नाम बताएं।"); return; }
        userData.city = city.trim();
        askPincode();
    }

    function askPincode() { state = 'AWAITING_PINCODE'; addBotMessage("आपके area का 6-digit pincode क्या है?"); }
    function processPincode(pincode) {
        if(!/^\d{6}$/.test(pincode.trim())) { handleUnclearInput("Pincode 6 digits का होना चाहिए। Please सही pincode बताएं।"); return; }
        userData.pincode = pincode.trim();
        askEmployment();
    }

    function askEmployment() {
        state = 'AWAITING_EMPLOYMENT';
        addBotMessage("आप Job करते हैं, Business करते हैं या कुछ और?");
        showQuickReplies([ {label: 'Job', value: 'Job'}, {label: 'Business', value: 'Business'}, {label: 'Other', value: 'Other'} ]);
    }
    function processEmployment(type) { userData.employment = type; askIncome(type); }
    
    function askIncome(type) {
        state = 'AWAITING_INCOME';
        addBotMessage(`आपकी ${type === 'Job' ? 'monthly salary' : 'monthly income'} कितनी है? (जैसे: 50000)`);
    }

    function processIncome(income) {
        const incomeNum = parseInt(income.replace(/,/g, ''), 10);
        if (isNaN(incomeNum) || incomeNum <= 0) { handleUnclearInput("Please एक valid amount बताएं।"); return; }
        userData.income = incomeNum;
        if (userData.product === 'Insurance') showSummary(); else askRunningLoan();
    }

    function askRunningLoan() {
        state = 'AWAITING_RUNNING_LOAN';
        addBotMessage("क्या आपकी कोई और loan EMI चल रही है?");
        showQuickReplies([ {label: 'Yes', value: 'Yes'}, {label: 'No', value: 'No'} ]);
    }
    
    function processRunningLoan(answer) {
        userData.runningLoan = answer;
        if (answer === 'Yes') {
            state = 'AWAITING_LOAN_DETAILS';
            addBotMessage("Please अपनी running loan की EMI, outstanding amount, और overdue status बताएं।");
        } else { askLoanAmount(); }
    }

    function processLoanDetails(details) { userData.runningLoanDetails = details; askLoanAmount(); }
    function askLoanAmount() { state = 'AWAITING_LOAN_AMOUNT'; addBotMessage("आपको कितना loan amount चाहिए? (जैसे: 500000)"); }
    function processLoanAmount(amount) {
        const amountNum = parseInt(amount.replace(/,/g, ''), 10);
        if (isNaN(amountNum) || amountNum <= 0) { handleUnclearInput("Please एक valid loan amount बताएं।"); return; }
        userData.loanAmount = amountNum;
        askTenure();
    }

    function askTenure() { state = 'AWAITING_TENURE'; addBotMessage("आप कितने साल के लिए loan चाहते हैं? (जैसे: 5)"); }
    function processTenure(tenure) {
        const tenureNum = parseInt(tenure, 10);
        if (isNaN(tenureNum) || tenureNum <= 0 || tenureNum > 30) { handleUnclearInput("Please 1 से 30 साल के बीच का valid tenure बताएं।"); return; }
        userData.tenure = tenureNum;
        showSummary();
    }

    function showSummary() {
        addBotMessage("✅ Thank you for sharing details!");
        if (userData.product !== 'Insurance') {
            const { emi, totalInterest, totalPayment, rate } = calculateEMI();
            userData.emi = Math.round(emi);
            userData.roi = rate; // Store the ROI to be sent to the sheet
            let summaryHtml = `<div class="p-4 bg-blue-50 border border-blue-200 rounded-lg"><h3 class="text-lg font-bold text-blue-800 mb-3">EMI Summary</h3><p><strong>Loan Amount:</strong> ₹${userData.loanAmount.toLocaleString('en-IN')}</p><p><strong>Tenure:</strong> ${userData.tenure} Years</p><p class="mt-4 text-2xl font-bold text-orange-600">Monthly EMI: ₹${userData.emi.toLocaleString('en-IN')}</p><hr class="my-3"><p><strong>Total Interest:</strong> ₹${Math.round(totalInterest).toLocaleString('en-IN')}</p><p><strong>Total Payment:</strong> ₹${Math.round(totalPayment).toLocaleString('en-IN')}</p></div>`;
            addBotMessage(summaryHtml);
        }
        setTimeout(askForConsent, 1000);
    }

    function askForConsent() {
        state = 'AWAITING_CONSENT';
        addBotMessage("क्या आप चाहते हैं मैं आपकी enquiry टीम experts को forward करूँ?");
        showFinalButtons([
            { label: 'Continue with Experts', class: 'px-5 py-2.5 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition w-full sm:w-auto', action: forwardToTeam },
            { label: 'Cancel', class: 'px-5 py-2.5 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 transition w-full sm:w-auto', action: cancelProcess }
        ]);
    }
    
    function cancelProcess() {
        addBotMessage("कोई बात नहीं। अगर आपको भविष्य में हमारी ज़रूरत पड़े, तो हम यहीं हैं। SKF से संपर्क करने के लिए धन्यवाद!");
        chatQuickReplies.innerHTML = '';
        chatInputContainer.style.display = 'flex';
        state = 'AWAITING_PURPOSE';
    }

    async function sendDataToGoogleSheet(data) {
        const scriptURL = 'https://script.google.com/macros/s/AKfycbycYpHtM0fkSToYUDR4Xq41cZ0V7zuY3qr1vExI4sM6MQXuSnSDjecO2P4Z2eJyqjwU/exec';
        const payload = {
            full_name: data.name || "",
            mobile_number: data.mobile || "",
            city: data.city || "",
            pincode: data.pincode || "",
            employment_type: data.employment || "",
            income: data.income || "",
            running_loan: data.runningLoan || "",
            running_loan_details: data.runningLoanDetails || "",
            required_amount: data.loanAmount || "",
            loan_type: data.product === 'Insurance' ? `${data.insuranceType} Insurance` : (data.product || ""),
            tenure: data.tenure || "",
            emi_estimate: data.emi || "",
            roi: data.roi || ""
        };

        try {
            // Using text/plain is a common method to bypass CORS preflight issues with Google Scripts
            await fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors', // Added to prevent CORS errors with Google Script redirects
                body: JSON.stringify(payload),
                 headers: {
                    "Content-Type": "text/plain;charset=utf-8",
                },
            });
            console.log('Data submission to Google Sheet initiated successfully.');
        } catch (error) {
            console.error('Error submitting data to Google Sheet:', error);
        }
    }

    function forwardToTeam() {
        // Send data to Google Sheet in the background
        sendDataToGoogleSheet(userData);
        
        const message = generateWhatsappMessage();
        const encodedMessage = encodeURIComponent(message);
        const productForNumber = userData.product === 'Insurance' ? 'Insurance' : userData.product;
        const number = teamNumbers[productForNumber] || teamNumbers['fallback'];
        const whatsappUrl = `https://wa.me/${number}?text=${encodedMessage}`;

        showConfetti();
        addBotMessage("🙏 Thank you! आपकी enquiry हमारी SKF टीम तक पहुंच गई है। Experts जल्द ही आपसे संपर्क करेंगे।");
        showFinalButtons([ { label: 'Click to send details on WhatsApp', class: 'px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition w-full animate-pulse', action: () => window.open(whatsappUrl, '_blank') } ]);
    }

    function calculateEMI() {
        let rate;
        switch (userData.product) {
            case 'Home Loan': rate = 8.5; break;
            case 'Loan Against Property': rate = 11.0; break;
            case 'Personal Loan': rate = 9.99; break;
            case 'Business Loan': rate = 12.0; break;
            case 'Car Loan': rate = 8.5; break;
            default: rate = 10.0;
        }
        const p = userData.loanAmount, r = rate / 1200, n = userData.tenure * 12;
        const emi = (p * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
        const totalPayment = emi * n;
        const totalInterest = totalPayment - p;
        return { emi, totalInterest, totalPayment, rate };
    }

    function generateWhatsappMessage() {
        let msg = `📩 *New Enquiry (SKF)* 📩\n\n`;
        msg += `*Product:* ${userData.product === 'Insurance' ? `${userData.insuranceType} Insurance` : userData.product}\n`;
        msg += `*Name:* ${userData.name}\n`;
        msg += `*Mobile:* ${userData.mobile}\n`;
        msg += `*City/Pincode:* ${userData.city} / ${userData.pincode}\n`;
        msg += `*Employment:* ${userData.employment} – Income: ₹${userData.income.toLocaleString('en-IN')}\n`;
        if (userData.product !== 'Insurance') {
            msg += `*Running Loan:* ${userData.runningLoan}${userData.runningLoan === 'Yes' ? ` (${userData.runningLoanDetails || 'Details provided'})` : ''}\n`;
            msg += `*Required Amount:* ₹${userData.loanAmount.toLocaleString('en-IN')}\n`;
            msg += `*Tenure:* ${userData.tenure} Years\n`;
            msg += `*EMI Estimate:* ₹${userData.emi.toLocaleString('en-IN')}\n`;
        }
        msg += `*Source:* Website Chatbot`;
        return msg;
    }

    function handleUnclearInput(fallbackMessage) {
        clarificationAttempts++;
        if (clarificationAttempts >= 3) {
            addBotMessage("लगता है कुछ confusion हो रहा है। आप चाहें तो सीधे हमारे expert से बात कर सकते हैं।");
            const fallbackUrl = `https://wa.me/${teamNumbers['fallback']}?text=${encodeURIComponent('Hi, I need assistance from the website.')}`;
            showFinalButtons([ { label: 'Connect with Human Expert', class: 'px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition w-full', action: () => window.open(fallbackUrl, '_blank') } ]);
            clarificationAttempts = 0;
            state = 'ENDED';
        } else {
            addBotMessage(fallbackMessage);
        }
    }
    
    function showConfetti() {
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            const colors = ['blue', 'green', 'pink', 'purple'];
            confetti.className = 'confetti-piece ' + colors[Math.floor(Math.random() * colors.length)];
            confettiContainer.appendChild(confetti);
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.animation = `fall ${3 + Math.random() * 2}s linear ${Math.random() * 2}s forwards`;
            confetti.addEventListener('animationend', () => confetti.remove());
        }
    }
    
    const sendBtnAction = () => {
        const text = chatInput.value.trim();
        if (text) { addUserMessage(text); handleUserInput(text); }
    };
    
    chatSendBtn.addEventListener('click', sendBtnAction);
    chatInput.addEventListener('keypress', (e) => e.key === 'Enter' && sendBtnAction());

    let proactiveTimeout;
    const showProactiveBubble = () => {
        if (chatWindow.style.display === 'flex') return;
        const proactiveBubbleContainer = document.getElementById('proactive-bubble-container');
        proactiveBubbleContainer.innerHTML = `<div class="proactive-bubble">Namaste! Loan ya Insurance ki jaankari chahiye?</div>`;
        setTimeout(() => document.querySelector('.proactive-bubble')?.classList.add('show'), 100);
        clearTimeout(proactiveTimeout);
        proactiveTimeout = setTimeout(hideProactiveBubble, 7000);
    };
    const hideProactiveBubble = () => {
        const bubble = document.querySelector('.proactive-bubble');
        if (bubble) {
            bubble.classList.remove('show');
            setTimeout(() => bubble.remove(), 300);
        }
    };
    setTimeout(showProactiveBubble, 5000);
    chatToggleBtn.addEventListener('mouseenter', hideProactiveBubble);


    new Swiper('.brands-carousel', {
        loop: true,
        slidesPerView: 2,
        spaceBetween: 20,
        autoplay: {
            delay: 2500,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        breakpoints: {
            640: { slidesPerView: 3, spaceBetween: 30 },
            768: { slidesPerView: 4, spaceBetween: 40 },
            1024: { slidesPerView: 6, spaceBetween: 50 },
        }
    });

    // --- Thank You Modal & Confetti Logic ---
    const thankYouModal = document.getElementById('thank-you-modal');
    const continueWhatsAppBtn = document.getElementById('continue-whatsapp-btn');
    let whatsappUrl = '';

    function showThankYouModal(url) {
        whatsappUrl = url;
        thankYouModal.classList.remove('hidden');
        launchConfetti();
    }
    
    continueWhatsAppBtn.addEventListener('click', () => {
        window.open(whatsappUrl, '_blank');
        thankYouModal.classList.add('hidden');
        document.getElementById('smart-eligibility-form').reset();
    });

    // Confetti Logic
    function launchConfetti() {
        const canvas = document.getElementById('confetti-canvas');
        if(!canvas) return;
        const ctx = canvas.getContext('2d');
        canvas.width = canvas.parentElement.offsetWidth;
        canvas.height = canvas.parentElement.offsetHeight;
        
        let confetti = [];
        const confettiCount = 100;
        const gravity = 0.5, terminalVelocity = 5, drag = 0.075;
        const colors = [
            { front: 'red', back: 'darkred' }, { front: 'green', back: 'darkgreen' },
            { front: 'blue', back: 'darkblue' }, { front: 'yellow', back: 'darkyellow' },
            { front: 'orange', back: 'darkorange' }, { front: 'pink', back: 'darkpink' }
        ];

        const randomRange = (min, max) => Math.random() * (max - min) + min;

        for (let i = 0; i < confettiCount; i++) {
            confetti.push({
                color: colors[Math.floor(randomRange(0, colors.length))],
                dimensions: { x: randomRange(5, 10), y: randomRange(8, 15) },
                position: { x: randomRange(0, canvas.width), y: -10 },
                rotation: randomRange(0, 2 * Math.PI),
                scale: { x: 1, y: 1 },
                velocity: { x: randomRange(-25, 25), y: randomRange(0, -50) }
            });
        }

        let animationFrame;
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            confetti.forEach((p, index) => {
                let width = p.dimensions.x * p.scale.x;
                let height = p.dimensions.y * p.scale.y;
                ctx.translate(p.position.x, p.position.y);
                ctx.rotate(p.rotation);
                p.velocity.x -= p.velocity.x * drag;
                p.velocity.y = Math.min(p.velocity.y + gravity, terminalVelocity);
                p.position.x += p.velocity.x;
                p.position.y += p.velocity.y;
                if (p.position.y >= canvas.height) confetti.splice(index, 1);
                ctx.fillStyle = p.velocity.y < 0 ? p.color.back : p.color.front;
                ctx.fillRect(-width / 2, -height / 2, width, height);
                ctx.setTransform(1, 0, 0, 1, 0, 0);
            });

            if (confetti.length > 0) animationFrame = requestAnimationFrame(render);
            else cancelAnimationFrame(animationFrame);
        }
        render();
    }
});
</script>
</body>
</html>




