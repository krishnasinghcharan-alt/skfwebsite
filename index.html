<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Apply - Shree Karni Kripa Associates (SKF Ajmer)</title>
  <style>
    /* Basic clean styling — modify to match your theme */
    :root{--blue:#0b66ff;--muted:#6b7280;--card:#ffffff}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Noto Sans", sans-serif; background:#f4f7fb; margin:0; color:#0b1726;}
    .container{max-width:920px;margin:28px auto;padding:18px;}
    .card{background:var(--card);border-radius:12px;box-shadow:0 6px 20px rgba(11,22,38,0.06);padding:20px;margin-bottom:16px;}
    h1,h2{margin:0 0 12px 0}
    label{display:block;margin:10px 0 6px;font-weight:600}
    input[type=text], input[type=tel], input[type=number], select, textarea{
      width:100%;padding:10px;border:1px solid #e6e9ef;border-radius:8px;font-size:15px;
    }
    .row{display:flex;gap:12px}
    .col{flex:1}
    .btn{background:var(--blue);color:white;padding:10px 16px;border-radius:8px;border:0;font-weight:700;cursor:pointer}
    .btn.secondary{background:#eef2ff;color:var(--blue);border:1px solid rgba(11,102,255,0.12)}
    .muted{color:var(--muted);font-size:14px}
    .steps{display:flex;gap:8px;margin-bottom:12px}
    .step{flex:1;padding:8px;border-radius:8px;background:#eef4ff;color:var(--blue);text-align:center;font-weight:600}
    .hidden{display:none}
    .right-panel{min-width:260px}
    .flex{display:flex;gap:16px;align-items:flex-start}
    .sticky-apply{position:sticky;top:18px;height:fit-content}
    .small{font-size:13px;color:var(--muted)}
    .whatsapp-btn{background:#25D366;color:white;padding:10px;border-radius:8px;border:0;font-weight:700;cursor:pointer;width:100%;}
    .consent{display:flex;gap:8px;align-items:center;margin-top:10px}
    pre{background:#f7fafc;padding:10px;border-radius:8px;overflow:auto}
    @media(max-width:760px){.flex{flex-direction:column}.right-panel{min-width:unset}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Apply for Loan — SKF Ajmer</h1>
      <p class="muted">Application will be sent directly to WhatsApp: <strong>+91 9214104963</strong>. कोई backend नहीं — सब WhatsApp पर मिलेगा।</p>
    </div>

    <div class="flex">
      <div style="flex:1">
        <div class="card" id="formCard">
          <div class="steps">
            <div class="step">1. Basic</div>
            <div class="step">2. Income</div>
            <div class="step">3. Docs</div>
            <div class="step">4. Review</div>
          </div>

          <!-- STEP 1 -->
          <div id="step1">
            <label>Full Name</label>
            <input id="name" type="text" placeholder="जैसे: मोहित कुमार" />

            <label>Mobile Number</label>
            <input id="phone" type="tel" placeholder="10-digit mobile number" />

            <label>City</label>
            <input id="city" type="text" placeholder="Ajmer" />

            <label>Loan Category</label>
            <select id="loan_category">
              <option value="Home Loan">Home Loan</option>
              <option value="Personal Loan">Personal Loan</option>
              <option value="Business Loan">Business Loan</option>
              <option value="Car Loan">Car Loan</option>
              <option value="Loan Against Property">Loan Against Property</option>
              <option value="Loan on Plot">Loan on Plot</option>
              <option value="Insurance">Insurance</option>
            </select>

            <label>Loan Type (Sub)</label>
            <input id="loan_type" type="text" placeholder="जैसे: Home Purchase Loan" />

            <label>Desired Loan Amount (₹)</label>
            <input id="loan_amount" type="number" placeholder="3000000" />

            <div style="margin-top:12px;text-align:right">
              <button class="btn" onclick="goStep(2)">Next →</button>
            </div>
          </div>

          <!-- STEP 2 -->
          <div id="step2" class="hidden">
            <label>Applicant Type</label>
            <select id="applicant_type">
              <option value="Salaried">Salaried</option>
              <option value="Self-Employed">Self-Employed</option>
            </select>

            <div class="row" style="margin-top:8px">
              <div class="col">
                <label>Monthly Income (approx)</label>
                <input id="income" type="number" placeholder="25000" />
              </div>
              <div class="col">
                <label>Preferred Tenure (years)</label>
                <input id="tenure" type="number" placeholder="20" />
              </div>
            </div>

            <label>Estimated EMI (use calculator)</label>
            <div style="display:flex;gap:8px;margin-top:8px">
              <input id="emi_display" readonly type="text" placeholder="EMI will show here" />
              <button class="btn secondary" onclick="openEmiModal()">Open EMI Calculator</button>
            </div>

            <div style="margin-top:12px;text-align:right">
              <button class="btn secondary" onclick="goStep(1)">← Back</button>
              <button class="btn" onclick="goStep(3)">Next →</button>
            </div>
          </div>

          <!-- STEP 3 -->
          <div id="step3" class="hidden">
            <label>Documents (quick note)</label>
            <textarea id="documents_note" placeholder="Aadhaar, PAN, Salary slips (3 months) / ITR (2 years), Bank statements (6 months)" rows="4"></textarea>

            <p class="small">ध्यान: आप फ़ाइल attach करना चाहते हैं तो submit के बाद WhatsApp में attach कर सकते हैं।</p>

            <div style="margin-top:12px;text-align:right">
              <button class="btn secondary" onclick="goStep(2)">← Back</button>
              <button class="btn" onclick="goStep(4)">Next →</button>
            </div>
          </div>

          <!-- STEP 4 (REVIEW) -->
          <div id="step4" class="hidden">
            <h2>Review & Send</h2>
            <pre id="preview" style="white-space:pre-wrap"></pre>

            <div class="consent">
              <input id="consent" type="checkbox" />
              <label class="small">मैं सहमत हूँ कि मेरी जानकारी SKF Ajmer को WhatsApp पर भेजी जाए और संपर्क कर लिया जाए।</label>
            </div>

            <div style="margin-top:12px;display:flex;gap:8px">
              <button class="btn secondary" onclick="goStep(3)">← Back</button>
              <button class="btn" onclick="sendToWhatsApp()">Send via WhatsApp</button>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT PANEL (Sticky) -->
      <div class="right-panel">
        <div class="card sticky-apply">
          <h2>Quick Apply</h2>
          <p class="small">Phone: <strong>+91 9214104963</strong></p>
          <p class="small">Apply quickly and our expert will contact you on WhatsApp.</p>
          <button class="whatsapp-btn" onclick="copyAndOpenWhatsApp()">Apply on WhatsApp</button>
          <hr style="margin:12px 0" />
          <h3 class="small">EMI Calculator</h3>
          <div style="display:flex;gap:8px">
            <input id="calc_amount" type="number" placeholder="Loan ₹" />
            <input id="calc_rate" type="number" placeholder="% p.a" />
            <input id="calc_years" type="number" placeholder="Years" />
          </div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button class="btn secondary" onclick="calcEMIInline()">Calculate</button>
            <div id="calc_result" class="small" style="align-self:center"></div>
          </div>
        </div>

        <div class="card">
          <h3 class="small">Why Apply via WhatsApp?</h3>
          <ul class="small">
            <li>तेज़ उत्तर — Direct message to our team</li>
            <li>Documents attach easily in chat</li>
            <li>No long forms — simple & fast</li>
          </ul>
        </div>
      </div>
    </div>

  </div>

<script>
const SKF_NUMBER = "+919214104963"; // change if needed (include country code)
function goStep(n){
  for(let i=1;i<=4;i++){ document.getElementById('step'+i).classList.add('hidden') }
  document.getElementById('step'+n).classList.remove('hidden');
  if(n===4) populatePreview();
}
function openEmiModal(){ // quick small calc: use current values
  const P = Number(document.getElementById('loan_amount').value)||0;
  const rA = Number(document.getElementById('tenure').value)||0;
  if(!P || !rA){ alert('कृपया Loan amount और Tenure डालें (Step 1 & 2).'); return; }
  const rate = 9; // default example
  const res = calculateEMI(P, rate, rA);
  document.getElementById('emi_display').value = '₹'+res.emi + ' /month @'+rate+'%';
}
function populatePreview(){
  const data = collectForm();
  const ts = new Date().toLocaleString('en-IN');
  const text = [
    `*New Lead — SKF Ajmer*`,
    `Timestamp: ${ts}`,
    `Name: ${data.name}`,
    `Mobile: ${data.phone}`,
    `City: ${data.city}`,
    `Loan Category: ${data.loan_category}`,
    `Loan Type: ${data.loan_type}`,
    `Loan Amount: ₹${data.loan_amount}`,
    `Applicant Type: ${data.applicant_type}`,
    `Monthly Income: ₹${data.income}`,
    `Tenure (yrs): ${data.tenure}`,
    `Documents: ${data.documents_note}`,
    `Ref: Website (WhatsApp only)`,
  ].join('\\n');
  document.getElementById('preview').innerText = text;
}
function collectForm(){
  return {
    name: document.getElementById('name').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    city: document.getElementById('city').value.trim(),
    loan_category: document.getElementById('loan_category').value,
    loan_type: document.getElementById('loan_type').value.trim(),
    loan_amount: document.getElementById('loan_amount').value,
    applicant_type: document.getElementById('applicant_type').value,
    income: document.getElementById('income').value,
    tenure: document.getElementById('tenure').value,
    documents_note: document.getElementById('documents_note').value.trim(),
    timestamp: new Date().toISOString()
  }
}
function sendToWhatsApp(){
  if(!document.getElementById('consent').checked){ alert('कृपया consent agree करें।'); return; }
  const d = collectForm();
  if(!d.name || !d.phone){ alert('कृपया Name और Mobile number भरें।'); goStep(1); return; }
  const msg = [
    `*New Lead — SKF Ajmer*`,
    `Timestamp: ${new Date().toLocaleString('en-IN')}`,
    `Name: ${d.name}`,
    `Mobile: ${d.phone}`,
    `City: ${d.city}`,
    `Loan Category: ${d.loan_category}`,
    `Loan Type: ${d.loan_type}`,
    `Loan Amount: ₹${d.loan_amount}`,
    `Applicant Type: ${d.applicant_type}`,
    `Monthly Income: ₹${d.income}`,
    `Tenure (yrs): ${d.tenure}`,
    `Documents: ${d.documents_note}`,
    `Source: Website (WhatsApp only)`
  ].join('\\n');
  openWhatsApp(msg);
}
function openWhatsApp(message){
  const phone = SKF_NUMBER.replace(/\D/g,''); // digits only
  const encoded = encodeURIComponent(message);
  const url = `https://wa.me/${phone}?text=${encoded}`;
  window.open(url,'_blank');
}

// QUICK BUTTON: copy and open blank WA
function copyAndOpenWhatsApp(){
  const msg = `Hello Shree Karni Kripa Associates, I want a loan. Please contact me. - [Visitor]`;
  openWhatsApp(msg);
}

/* EMI Calculator */
function calculateEMI(principal, annualRatePercent, years) {
  const r = annualRatePercent / 12 / 100;
  const n = years * 12;
  if(n===0 || r===0) {
    const emi = Math.round(principal / (n||1));
    return { emi, total: emi*n, totalInterest: Math.max(0, emi*n - principal) };
  }
  const emi = (principal * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
  const total = emi * n;
  const totalInterest = total - principal;
  return { emi: Math.round(emi), total: Math.round(total), totalInterest: Math.round(totalInterest) };
}
function calcEMIInline(){
  const P = Number(document.getElementById('calc_amount').value)||0;
  const R = Number(document.getElementById('calc_rate').value)||0;
  const Y = Number(document.getElementById('calc_years').value)||0;
  if(!P || !R || !Y){ alert('Please enter Loan, Rate and Years'); return; }
  const res = calculateEMI(P,R,Y);
  document.getElementById('calc_result').innerText = `EMI ₹${res.emi} | Total ₹${res.total} | Interest ₹${res.totalInterest}`;
  // copy EMI to review field
  document.getElementById('emi_display').value = '₹'+res.emi + ' /month @'+R+'%';
}
</script>
</body>
</html>
